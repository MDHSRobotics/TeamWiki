!function(e){var t={};function n(s){if(t[s])return t[s].exports;var i=t[s]={i:s,l:!1,exports:{}};return e[s].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(s,i,function(t){return e[t]}.bind(null,i));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=n(9),i=n(18);let o=!1;function r(){const e=document.getElementById("pause");null!==e&&(!0===o?(o=!1,e.innerHTML="Pause",i.sendMessage({message:!1,type:s.ReceiveTypes.Pause})):(o=!0,e.innerHTML="Paused: 0",i.sendMessage({message:!0,type:s.ReceiveTypes.Pause})))}t.onPause=r;let a=!1;function c(){const e=document.getElementById("discard");null!==e&&(!0===a?(a=!1,e.innerHTML="Discard",i.sendMessage({message:!1,type:s.ReceiveTypes.Discard})):(a=!0,e.innerHTML="Resume",i.sendMessage({message:!0,type:s.ReceiveTypes.Discard})))}function l(){const e=document.getElementById("list");null!==e&&(e.innerHTML="")}t.onDiscard=c,t.onClear=l;let d=!0;function u(){const e=document.getElementById("showwarnings");if(null===e)return;!0===d?(d=!1,e.innerHTML="Show Warnings"):(d=!0,e.innerHTML="Don't Show Warnings");const t=document.getElementById("list");if(null===t)return;const n=t.getElementsByTagName("li");for(let e=0;e<n.length;++e)"warning"===n[e].dataset.type&&(n[e].style.display=!0===d?"inline":"none");i.checkResize()}t.onShowWarnings=u;let h=!0;function p(){const e=document.getElementById("showprints");if(null===e)return;!0===h?(h=!1,e.innerHTML="Show Prints"):(h=!0,e.innerHTML="Don't Show Prints");const t=document.getElementById("list");if(null===t)return;const n=t.getElementsByTagName("li");for(let e=0;e<n.length;++e)"print"===n[e].dataset.type&&(n[e].style.display=!0===h?"inline":"none");i.checkResize()}t.onShowPrints=p;let m=!0;function f(){!0===m?(m=!1,i.sendMessage({message:!1,type:s.ReceiveTypes.Reconnect})):(m=!0,i.sendMessage({message:!0,type:s.ReceiveTypes.Reconnect}));const e=document.getElementById("autoreconnect");null!==e&&(e.innerHTML=!0===m?"Reconnect":"Disconnect")}t.onAutoReconnect=f;let y=!1;function g(){const e=document.getElementById("timestamps");if(null===e)return;!0===y?(y=!1,e.innerHTML="Show Timestamps"):(y=!0,e.innerHTML="Don't Show Timestamps");const t=document.getElementById("list");if(null===t)return;const n=t.getElementsByTagName("li");for(let e=0;e<n.length;++e){const t=n[e].getElementsByTagName("span");if(void 0!==t)for(let e=0;e<t.length;e++){const n=t[e];n.hasAttribute("data-timestamp")&&(n.style.display=!0===y?"inline":"none")}}i.checkResize()}function v(){const e=document.getElementById("list");if(null===e)return;const t=e.getElementsByTagName("li"),n=[];for(let e=0;e<t.length;++e){const s=t[e].dataset.message;if(void 0===s)return;n.push(s)}i.sendMessage({message:n,type:s.ReceiveTypes.Save})}function w(){const e=document.getElementById("autoreconnect");null!==e&&(e.style.backgroundColor="Green")}function T(){const e=document.getElementById("autoreconnect");null!==e&&(e.style.backgroundColor="Red")}function b(e,t,n,s){const i=document.createElement("div"),o=document.createElement("span");o.appendChild(document.createTextNode(e.toFixed(3)+": ")),o.dataset.timestamp="true",o.style.display=!0===y?"inline":"none",i.appendChild(o);const r=document.createElement("span"),a=t.split("\n");let c=!0;for(const e of a){if(""===e.trim())continue;!1===c&&r.appendChild(document.createElement("br")),c=!1;const t=document.createTextNode(e);r.appendChild(t)}void 0!==s&&(r.style.color=s),i.appendChild(r),n.appendChild(i)}function C(e){e.messageType===s.MessageType.Print?_(e):L(e)}function E(){const e=document.getElementById("list");null!==e&&e.childElementCount>1e3&&null!==e.firstChild&&e.removeChild(e.firstChild)}function _(e){E();const t=document.getElementById("list");if(null===t)return;const n=document.createElement("li");n.style.fontFamily='Consolas, "Courier New", monospace',b(e.timestamp,e.line,n);const s=JSON.stringify(e);n.dataset.message=s,n.dataset.type="print",n.style.display=!0===h?"inline":"none",t.appendChild(n)}function S(e,t,n){b(e.timestamp,e.details,t,n),function(e,t,n){const s=document.createElement("div"),i=e.split("\n");let o=!0;for(const e of i){if(""===e.trim())continue;!1===o&&t.appendChild(document.createElement("br")),o=!1;const n=document.createTextNode("   from: "+e);t.appendChild(n)}void 0!==n&&(s.style.color=n),t.appendChild(s)}(e.location,t),function(e,t,n){const s=document.createElement("div"),i=e.split("\n");let o=!0;for(const e of i){if(""===e.trim())continue;!1===o&&s.appendChild(document.createElement("br")),o=!1;const t=document.createTextNode("     at: "+e);s.appendChild(t)}void 0!==n&&(s.style.color=n),t.appendChild(s)}(e.callStack,t),t.appendChild(document.createElement("br"))}function L(e){E();const t=document.getElementById("list");if(null===t)return;const n=document.createElement("li");n.style.fontFamily='Consolas, "Courier New", monospace';const o=JSON.stringify(e);n.dataset.expanded="false",n.dataset.message=o,e.messageType===s.MessageType.Warning?(n.dataset.type="warning",b(e.timestamp,e.details,n,"Yellow"),n.style.display=!0===d?"inline":"none"):(n.dataset.type="error",b(e.timestamp,e.details,n,"Red")),n.onclick=(()=>{if("true"===n.dataset.expanded){if(n.dataset.expanded="false",void 0===n.dataset.message)return;const e=JSON.parse(n.dataset.message);n.innerHTML="","warning"===n.dataset.type?b(e.timestamp,e.details,n,"Yellow"):b(e.timestamp,e.details,n,"Red")}else{if(n.dataset.expanded="true",void 0===n.dataset.message)return;const e=JSON.parse(n.dataset.message);n.innerHTML="","warning"===n.dataset.type?S(e,n,"Yellow"):S(e,n,"Red")}i.checkResize()}),t.appendChild(n)}function M(e){const t=e.target.files[0],n=new FileReader;n.onload=(e=>{const t=e.target,n=JSON.parse(t.result);for(const e of n)C(e);i.checkResize()}),n.readAsText(t)}t.onShowTimestamps=g,t.onSaveLog=v,t.onConnect=w,t.onDisconnect=T,t.addMessage=C,t.addPrint=_,t.expandError=S,t.addError=L,window.addEventListener("resize",()=>{i.checkResize()});let P=100;function R(e){const t=document.createElement("ul");return t.style.position="fixed",t.style.bottom="0px",e?t.style.left="0px":t.style.right="0px",t.style.listStyleType="none",t.style.padding="0",t.style.width="49.8%",t.style.marginBottom="1px",t}function I(e,t,n){const s=document.createElement("li"),i=document.createElement("button");return i.id=e,i.style.width="100%",i.appendChild(document.createTextNode(t)),i.addEventListener("click",n),s.appendChild(i),s}function A(){const e=document.getElementById("teamNumber");console.log("finding team number"),null!==e&&(console.log("sending message"),i.sendMessage({message:parseInt(e.value,10),type:s.ReceiveTypes.ChangeNumber}),console.log("sent message"))}function k(){const e=document.getElementById("mainDiv");if(void 0===e)return;const t=e;P=100,t.innerHTML="";const n=document.createElement("ul");n.id="list",n.style.listStyleType="none",n.style.padding="0",t.appendChild(n);const s=document.createElement("div");s.style.height="100px",t.appendChild(s);const i=R(!0);i.appendChild(I("pause","Pause",r)),i.appendChild(I("discard","Discard",c)),i.appendChild(I("clear","Clear",l)),i.appendChild(I("showprints","Don't Show Prints",p)),i.appendChild(I("switchPage","Switch to Viewer",()=>{x()})),t.appendChild(i);const o=R(!1);o.appendChild(I("showwarnings","Don't Show Warnings",u)),o.appendChild(I("autoreconnect","Disconnect",f)),o.appendChild(I("timestamps","Show Timestamps",g)),o.appendChild(I("savelot","Save Log",v));const a=document.createElement("li"),d=document.createElement("input");d.id="teamNumber",d.type="number",d.style.width="50%";const h=document.createElement("button");h.id="changeTeamNumber",h.style.width="24.9%",h.style.right="0",h.style.position="fixed",h.addEventListener("click",A),h.appendChild(document.createTextNode("Set Team Number")),a.appendChild(d),a.appendChild(h),o.appendChild(a),t.appendChild(o),!0!==m&&f()}function x(){const e=document.getElementById("mainDiv");if(void 0===e)return;!0===m&&f();const t=e;P=60,t.innerHTML="";const n=document.createElement("ul");n.id="list",n.style.listStyleType="none",n.style.padding="0",t.appendChild(n);const s=document.createElement("div");s.style.height="60px",t.appendChild(s);const i=R(!0),o=document.createElement("input");o.type="file",o.id="openFile",o.name="files[]",o.style.width="100%",o.addEventListener("change",M,!1),i.appendChild(o),i.appendChild(I("showprints","Don't Show Prints",p)),i.appendChild(I("switchPage","Switch to Live",()=>{k()})),t.appendChild(i);const r=R(!1);r.appendChild(I("showwarnings","Don't Show Warnings",u)),r.appendChild(I("timestamps","Show Timestamps",g)),t.appendChild(r)}t.checkResizeImpl=function(e){const t=e.clientHeight-P,n=document.getElementById("list");null!==n&&(n.clientHeight<t?(n.style.position="fixed",n.style.bottom=P+"px"):(n.style.position="static",n.style.bottom="auto"))},t.handleMessage=function(e){switch(e.type){case s.SendTypes.New:C(e.message),i.scrollImpl();break;case s.SendTypes.Batch:for(const t of e.message)C(t);i.scrollImpl();break;case s.SendTypes.PauseUpdate:const t=document.getElementById("pause");null!==t&&(t.innerHTML="Paused: "+e.message);break;case s.SendTypes.ConnectionChanged:!0===e.message?w():T()}i.checkResize()},t.setViewerPage=x,window.addEventListener("load",e=>{k()})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Batch=0]="Batch",e[e.ConnectionChanged=1]="ConnectionChanged",e[e.PauseUpdate=2]="PauseUpdate",e[e.New=3]="New"}(t.SendTypes||(t.SendTypes={})),function(e){e[e.Discard=0]="Discard",e[e.Pause=1]="Pause",e[e.Save=2]="Save",e[e.Reconnect=3]="Reconnect",e[e.ChangeNumber=4]="ChangeNumber"}(t.ReceiveTypes||(t.ReceiveTypes={}))},function(e,t,n){"use strict";var s;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Print=2]="Print"}(s=t.MessageType||(t.MessageType={}));t.PrintMessage=class{constructor(e){this.messageType=s.Print;let t=0;this.timestamp=e.readFloatBE(t),t+=4,this.seqNumber=e.readInt16BE(t),t+=2;const n=e.slice(t);this.line=n.toString("utf8")}};t.ErrorMessage=class{constructor(e){let t=0;this.timestamp=e.readFloatBE(t),t+=4,this.seqNumber=e.readInt16BE(t),t+=2,this.numOccur=e.readInt16BE(t),t+=2,this.errorCode=e.readInt32BE(t),t+=4,this.flags=e.readUInt8(t),t+=1;let n=this.getSizedString(e,t);this.details=n.data,t+=n.byteLength,n=this.getSizedString(e,t),this.location=n.data,t+=n.byteLength,n=this.getSizedString(e,t),this.callStack=n.data,t+=n.byteLength,this.messageType=0!=(1&this.flags)?s.Error:s.Warning}getSizedString(e,t){const n=e.readUInt16BE(t);t+=2;const s=n+2;return{byteLength:s,data:e.toString("utf8",t,t+s-2)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=n(10),i=n(11);const o=["172.22.11.2","127.0.0.1"],r=["roboRIO-TEAM-FRC.local","roboRIO-TEAM-FRC.lan","roboRIO-TEAM-FRC.frc-field.local"];class a{constructor(e,t,n){this.socket=e,this.promise=n,this.dsSocket=t}dispose(){this.socket.emit("dispose"),this.dsSocket.emit("dispose")}}class c{constructor(e,t){this.socket=e,this.promise=t}dispose(){this.socket.emit("dispose")}}function l(e,t){const n=new s.Socket;return new c(n,new Promise((s,i)=>{n.on("error",s=>{console.log("failed connection to "+t+" at "+e),n.end(),n.destroy(),n.removeAllListeners(),i()}),n.on("timeout",()=>{console.log("failed connection to "+t+" at "+e),n.end(),n.destroy(),n.removeAllListeners(),i()}),n.on("close",()=>{n.end(),n.destroy(),n.removeAllListeners(),i()}),n.on("dispose",()=>{console.log("disposed",t),i(),n.end(),n.destroy(),n.removeAllListeners()}),n.connect(e,t,()=>{n.removeAllListeners(),s(n)})}))}t.connectToRobot=async function(e,t,n){const c=[];t=Math.trunc(t);for(const t of o)c.push(l(e,t));for(const n of r)c.push(l(e,n.replace("TEAM",t.toString())));c.push(l(e,`10.${Math.trunc(t/100)}.${t%100}.2`)),c.push(function(e){const t=new s.Socket,n=new s.Socket;return new a(t,n,new Promise((s,i)=>{n.on("data",o=>{const r=JSON.parse(o.toString());if(0===r.robotIP)return n.end(),n.destroy(),n.removeAllListeners(),void i();let a="";const c=r.robotIP;a+=(c>>24&255)+".",a+=(c>>16&255)+".",a+=(c>>8&255)+".",a+=255&c,t.on("error",n=>{console.log("failed connection to "+c+" at "+e),t.end(),t.destroy(),t.removeAllListeners(),i()}),t.on("timeout",()=>{console.log("failed connection to "+c+" at "+e),t.end(),t.destroy(),t.removeAllListeners(),i()}),t.on("close",()=>{console.log("failed connection to "+c+" at "+e),t.end(),t.destroy(),t.removeAllListeners(),i()}),t.on("dispose",()=>{console.log("disposed ds connected"),i(),t.end(),t.destroy(),t.removeAllListeners()}),t.connect(e,a,()=>{t.removeAllListeners(),s(t)}),n.end(),n.destroy(),n.removeAllListeners()}),n.on("error",()=>{i()}),n.on("dispose",()=>{console.log("disposed ds"),i(),n.end(),n.destroy(),n.removeAllListeners()}),n.connect(1742,"127.0.0.1")}))}(e));const d=[];for(const e of c)d.push(e.promise);const u=function(e){let t;return{promise:new Promise((n,s)=>{t=i.setTimeout(()=>{n(void 0)},e)}),cancel(){void 0!==t&&(console.log("cancelled timer"),i.clearTimeout(t))}}}(n);d.push(u.promise);const h=await async function e(t){if(t.length<1)return Promise.reject("Can't start a race without promises!");const n=t.map((e,t)=>e.catch(()=>{throw t}));try{return await Promise.race(n)}catch(n){return console.log("reject promise"),t.splice(n,1)[0].catch(e=>console.log("A promise has been rejected, but awaiting others",e)),e(t)}}(d);if(void 0===h)for(const e of c){e.dispose();try{await e.promise}catch(e){}}else{u.cancel();for(const e of c)if(h!==e.socket){e.dispose();try{await e.promise}catch(e){}}}return h}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},,,,function(e,t,n){"use strict";function s(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),s(n(2)),s(n(3)),s(n(4)),s(n(14)),s(n(17))},function(e,t){},function(e,t,n){(function(e){var s=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(i.call(setTimeout,s,arguments),clearTimeout)},t.setInterval=function(){return new o(i.call(setInterval,s,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(s,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(12),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(5))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var s,i=1,o={},r=!1,a=e.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(e);c=c&&c.setTimeout?c:e,"[object process]"==={}.toString.call(e.process)?s=function(e){t.nextTick(function(){d(e)})}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&d(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),s=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){d(e.data)},s=function(t){e.port2.postMessage(t)}}():a&&"onreadystatechange"in a.createElement("script")?function(){var e=a.documentElement;s=function(t){var n=a.createElement("script");n.onreadystatechange=function(){d(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():s=function(e){setTimeout(d,0,e)},c.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return o[i]=r,s(i),i++},c.clearImmediate=l}function l(e){delete o[e]}function d(e){if(r)setTimeout(d,0,e);else{var t=o[e];if(t){r=!0;try{!function(e){var t=e.callback,s=e.args;switch(s.length){case 0:t();break;case 1:t(s[0]);break;case 2:t(s[0],s[1]);break;case 3:t(s[0],s[1],s[2]);break;default:t.apply(n,s)}}(t)}finally{l(e),r=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(5),n(13))},function(e,t){var n,s,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{s="function"==typeof clearTimeout?clearTimeout:r}catch(e){s=r}}();var c,l=[],d=!1,u=-1;function h(){d&&c&&(d=!1,c.length?l=c.concat(l):u=-1,l.length&&p())}function p(){if(!d){var e=a(h);d=!0;for(var t=l.length;t;){for(c=l,l=[];++u<t;)c&&c[u].run();u=-1,t=l.length}c=null,d=!1,function(e){if(s===clearTimeout)return clearTimeout(e);if((s===r||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{s(e)}catch(t){try{return s.call(null,e)}catch(t){return s.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function f(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new m(e,t)),1!==l.length||d||a(p)},m.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=f,i.addListener=f,i.once=f,i.off=f,i.removeListener=f,i.removeAllListeners=f,i.emit=f,i.prependListener=f,i.prependOnceListener=f,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=n(15),i=n(3),o=n(16),r=n(4);t.RioConsole=class extends s.EventEmitter{constructor(){super(...arguments),this.discard=!1,this.connected=!1,this.autoReconnect=!0,this.cleanup=!1,this.condition=new o.PromiseCondition,this.teamNumber=0}stop(){this.cleanup=!0,this.closeSocket()}getAutoReconnect(){return this.autoReconnect}setAutoReconnect(e){this.autoReconnect=e,!0===e&&this.condition.set()}startListening(){this.promise=(async()=>{for(;!this.cleanup;){for(;!this.autoReconnect;){if(this.cleanup)return;await this.condition.wait(),this.condition.reset()}await this.runFunction(this.teamNumber)}console.log("finished loop")})()}closeSocket(){void 0!==this.closeFunc&&this.closeFunc()}disconnect(){this.closeSocket()}setTeamNumber(e){this.teamNumber=e}async dispose(){this.stop(),this.removeAllListeners(),await this.promise}async connect(e){const t=await r.connectToRobot(1741,e,2e3);if(void 0!==t)return t.setNoDelay(!0),t.setKeepAlive(!0,500),t}handleData(e){if(this.discard)return;let t=0,n=0;do{n=e.readUInt16BE(t),t+=2}while(0===n);const s=e.readUInt8(t);t++;const o=e.slice(3,n+2),r=e.slice(2+n);if(11===s){const e=new i.ErrorMessage(o);this.emit("message",e)}else if(12===s){const e=new i.PrintMessage(o);this.emit("message",e)}r.length>0&&this.handleData(r)}async runFunction(e){const t=await this.connect(e);if(void 0!==t){if(this.connected=!0,this.emit("connectionChanged",!0),console.log("succesfully connected"),t.on("data",e=>{this.handleData(e)}),this.cleanup)return t.end(),t.destroy(),void t.removeAllListeners();await new Promise((e,n)=>{this.closeFunc=(()=>{t.end(),t.destroy(),t.removeAllListeners(),e(),console.log("closed locally")}),t.on("close",()=>{t.removeAllListeners(),e(),console.log("closed remotely (close)")}),t.on("end",()=>{t.removeAllListeners(),e(),console.log("closed remotely (end)")})}),this.connected=!1,this.emit("connectionChanged",!1)}else console.log("bad socket")}}},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function s(e){return"function"==typeof e}function i(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!function(e){return"number"==typeof e}(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,r,a,c,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var d=new Error('Uncaught, unspecified "error" event. ('+t+")");throw d.context=t,d}if(o(n=this._events[e]))return!1;if(s(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(i(n))for(a=Array.prototype.slice.call(arguments,1),r=(l=n.slice()).length,c=0;c<r;c++)l[c].apply(this,a);return!0},n.prototype.addListener=function(e,t){var r;if(!s(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,s(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(r=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){if(!s(t))throw TypeError("listener must be a function");var n=!1;function i(){this.removeListener(e,i),n||(n=!0,t.apply(this,arguments))}return i.listener=t,this.on(e,i),this},n.prototype.removeListener=function(e,t){var n,o,r,a;if(!s(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=(n=this._events[e]).length,o=-1,n===t||s(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(n)){for(a=r;a-- >0;)if(n[a]===t||n[a].listener&&n[a].listener===t){o=a;break}if(o<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(s(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?s(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(s(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PromiseCondition=class{constructor(){this.hasBeenSet=!1,this.condSet=void 0}wait(){return new Promise((e,t)=>{this.condSet=(()=>{e()}),!0===this.hasBeenSet&&e()})}set(){this.hasBeenSet=!0,void 0!==this.condSet&&this.condSet()}reset(){this.condSet=void 0,this.hasBeenSet=!1}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=n(2);t.RioLogWindow=class{constructor(e,t){this.webview=void 0,this.rioConsole=void 0,this.running=!1,this.disposables=[],this.pausedArray=[],this.paused=!1,this.hiddenArray=[],this.windowProvider=e,this.rioConsoleProvider=t}start(e){this.running||(this.running=!0,this.createWebView(),this.createRioConsole(),void 0!==this.webview&&void 0!==this.rioConsole&&(this.webview.on("didDispose",()=>{void 0!==this.rioConsole&&(this.rioConsole.stop(),this.rioConsole.removeAllListeners()),this.rioConsole=void 0,this.webview=void 0,this.running=!1}),this.webview.on("didReceiveMessage",async e=>{await this.onMessageReceived(e)}),this.rioConsole.on("connectionChanged",async e=>{await this.onConnectionChanged(e)}),this.rioConsole.on("message",async e=>{await this.onNewMessageToSend(e)}),this.rioConsole.setTeamNumber(e),this.rioConsole.startListening()))}stop(){void 0!==this.webview&&this.webview.dispose()}dispose(){this.stop();for(const e of this.disposables)e.dispose()}createWebView(){this.webview=this.windowProvider.createWindowView(),this.webview.on("windowActive",async()=>{void 0!==this.webview&&(await this.webview.postMessage({message:this.hiddenArray,type:s.SendTypes.Batch}),void 0!==this.rioConsole&&(!0===this.rioConsole.connected?await this.webview.postMessage({message:!0,type:s.SendTypes.ConnectionChanged}):await this.webview.postMessage({message:!1,type:s.SendTypes.ConnectionChanged})))})}createRioConsole(){this.rioConsole=this.rioConsoleProvider.getRioConsole()}async sendPaused(){void 0!==this.webview&&(await this.webview.postMessage({message:this.pausedArray,type:s.SendTypes.Batch})||this.hiddenArray.push(...this.pausedArray),this.pausedArray=[])}async onConnectionChanged(e){void 0!==this.webview&&(e?await this.webview.postMessage({message:!0,type:s.SendTypes.ConnectionChanged}):await this.webview.postMessage({message:!1,type:s.SendTypes.ConnectionChanged}))}async onNewMessageToSend(e){void 0!==this.webview&&(!0===this.paused?(this.pausedArray.push(e),await this.webview.postMessage({message:this.pausedArray.length,type:s.SendTypes.PauseUpdate})):await this.webview.postMessage({message:e,type:s.SendTypes.New})||this.hiddenArray.push(e))}async onMessageReceived(e){if(void 0!==this.rioConsole)if(e.type===s.ReceiveTypes.Discard)this.rioConsole.discard=e.message;else if(e.type===s.ReceiveTypes.Pause){const t=this.paused;this.paused=e.message,!0===t&&!1===this.paused&&await this.sendPaused()}else if(e.type===s.ReceiveTypes.Save){if(void 0===this.webview)return;const t=[];for(const n of e.message){const e=JSON.parse(n);t.push(e)}await this.webview.handleSave(t)}else if(e.type===s.ReceiveTypes.Reconnect){const t=e.message;this.rioConsole.setAutoReconnect(t),!1===t&&this.rioConsole.disconnect()}else if(e.type===s.ReceiveTypes.ChangeNumber){const t=e.message;console.log("setting team number"),this.rioConsole.setTeamNumber(t)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=n(1),i=acquireVsCodeApi();t.checkResize=function(){s.checkResizeImpl(document.documentElement)},t.scrollImpl=function(){document.documentElement.scrollTop=document.documentElement.scrollHeight},t.sendMessage=function(e){i.postMessage(e,"*")},window.addEventListener("message",e=>{const t=e.data;s.handleMessage(t)})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3Jpb2xvZy9zaGFyZWQvc2hhcmVkc2NyaXB0LnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy93cGlsaWItcmlvbG9nL291dC9pbnRlcmZhY2VzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy93cGlsaWItcmlvbG9nL291dC9tZXNzYWdlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy93cGlsaWItcmlvbG9nL291dC9yaW9jb25uZWN0b3IuanMiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9idWlsZGluL2dsb2JhbC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvd3BpbGliLXJpb2xvZy9vdXQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3RpbWVycy1icm93c2VyaWZ5L21haW4uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3NldGltbWVkaWF0ZS9zZXRJbW1lZGlhdGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3Byb2Nlc3MvYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvd3BpbGliLXJpb2xvZy9vdXQvcmlvY29uc29sZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZXZlbnRzL2V2ZW50cy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvd3BpbGliLXJpb2xvZy9vdXQvcHJvbWlzZWNvbmQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3dwaWxpYi1yaW9sb2cvb3V0L3Jpb2xvZ3dpbmRvdy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcmlvbG9nL3NjcmlwdC9pbXBsc2NyaXB0LnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwid3BpbGliX3Jpb2xvZ18xIiwiaW1wbHNjcmlwdF8xIiwicGF1c2VkIiwib25QYXVzZSIsInBhdXNlRWxlbWVudCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJpbm5lckhUTUwiLCJzZW5kTWVzc2FnZSIsIm1lc3NhZ2UiLCJ0eXBlIiwiUmVjZWl2ZVR5cGVzIiwiUGF1c2UiLCJkaXNjYXJkIiwib25EaXNjYXJkIiwiZEJ1dHRvbiIsIkRpc2NhcmQiLCJvbkNsZWFyIiwibGlzdCIsInNob3dXYXJuaW5ncyIsIm9uU2hvd1dhcm5pbmdzIiwid2FybmluZ3NCdXR0b24iLCJ1bCIsIml0ZW1zIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJsZW5ndGgiLCJkYXRhc2V0Iiwic3R5bGUiLCJkaXNwbGF5IiwiY2hlY2tSZXNpemUiLCJzaG93UHJpbnRzIiwib25TaG93UHJpbnRzIiwicHJpbnRCdXR0b24iLCJhdXRvUmVjb25uZWN0Iiwib25BdXRvUmVjb25uZWN0IiwiUmVjb25uZWN0IiwiYXJCdXR0b24iLCJzaG93VGltZXN0YW1wcyIsIm9uU2hvd1RpbWVzdGFtcHMiLCJ0c0J1dHRvbiIsInNwYW5zIiwidW5kZWZpbmVkIiwiaiIsInNwYW4iLCJoYXNBdHRyaWJ1dGUiLCJvblNhdmVMb2ciLCJsb2dzIiwicHVzaCIsIlNhdmUiLCJvbkNvbm5lY3QiLCJidXR0b24iLCJiYWNrZ3JvdW5kQ29sb3IiLCJvbkRpc2Nvbm5lY3QiLCJpbnNlcnRNZXNzYWdlIiwidHMiLCJsaW5lIiwibGkiLCJjb2xvciIsImRpdiIsImNyZWF0ZUVsZW1lbnQiLCJ0c1NwYW4iLCJhcHBlbmRDaGlsZCIsImNyZWF0ZVRleHROb2RlIiwidG9GaXhlZCIsInRpbWVzdGFtcCIsInNwbGl0IiwiZmlyc3QiLCJpdGVtIiwidHJpbSIsInROb2RlIiwiYWRkTWVzc2FnZSIsIm1lc3NhZ2VUeXBlIiwiTWVzc2FnZVR5cGUiLCJQcmludCIsImFkZFByaW50IiwiYWRkRXJyb3IiLCJsaW1pdExpc3QiLCJjaGlsZEVsZW1lbnRDb3VudCIsImZpcnN0Q2hpbGQiLCJyZW1vdmVDaGlsZCIsImZvbnRGYW1pbHkiLCJzdHIiLCJKU09OIiwic3RyaW5naWZ5IiwiZXhwYW5kRXJyb3IiLCJkZXRhaWxzIiwibG9jIiwiaW5zZXJ0TG9jYXRpb24iLCJsb2NhdGlvbiIsInN0IiwiaW5zZXJ0U3RhY2tUcmFjZSIsImNhbGxTdGFjayIsImV4cGFuZGVkIiwiV2FybmluZyIsIm9uY2xpY2siLCJwYXJzZWQiLCJwYXJzZSIsImhhbmRsZUZpbGVTZWxlY3QiLCJldnQiLCJmaXJzdEZpbGUiLCJ0YXJnZXQiLCJmaWxlcyIsInJlYWRlciIsIkZpbGVSZWFkZXIiLCJvbmxvYWQiLCJsb2FkZWQiLCJyZXN1bHQiLCJyZWFkQXNUZXh0Iiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsImN1cnJlbnRTY3JlZW5IZWlnaHQiLCJjcmVhdGVTcGxpdFVsIiwibGVmdCIsInNwbGl0RGl2IiwicG9zaXRpb24iLCJib3R0b20iLCJyaWdodCIsImxpc3RTdHlsZVR5cGUiLCJwYWRkaW5nIiwid2lkdGgiLCJtYXJnaW5Cb3R0b20iLCJjcmVhdGVCdXR0b24iLCJpZCIsInRleHQiLCJjYWxsYmFjayIsIm9uQ2hhbmdlVGVhbU51bWJlciIsIm5ld051bWJlciIsImNvbnNvbGUiLCJsb2ciLCJwYXJzZUludCIsIkNoYW5nZU51bWJlciIsInNldExpdmVQYWdlIiwibWR2IiwibWFpbkRpdiIsImhlaWdodCIsImxlZnRMaXN0Iiwic2V0Vmlld2VyUGFnZSIsInJpZ2h0TGlzdCIsInRlYW1OdW1iZXJVbCIsInRlYW1OdW1iZXJJIiwidGVhbU51bWJlckIiLCJmaWxlSW5wdXQiLCJjaGVja1Jlc2l6ZUltcGwiLCJlbGVtZW50IiwiYWxsb3dlZEhlaWdodCIsImNsaWVudEhlaWdodCIsImhhbmRsZU1lc3NhZ2UiLCJkYXRhIiwiU2VuZFR5cGVzIiwiTmV3Iiwic2Nyb2xsSW1wbCIsIkJhdGNoIiwiUGF1c2VVcGRhdGUiLCJwYXVzZSIsIkNvbm5lY3Rpb25DaGFuZ2VkIiwiXyIsIlByaW50TWVzc2FnZSIsIltvYmplY3QgT2JqZWN0XSIsInRoaXMiLCJjb3VudCIsInJlYWRGbG9hdEJFIiwic2VxTnVtYmVyIiwicmVhZEludDE2QkUiLCJzbGljZSIsInRvU3RyaW5nIiwiRXJyb3JNZXNzYWdlIiwibnVtT2NjdXIiLCJlcnJvckNvZGUiLCJyZWFkSW50MzJCRSIsImZsYWdzIiwicmVhZFVJbnQ4IiwidG1wIiwiZ2V0U2l6ZWRTdHJpbmciLCJieXRlTGVuZ3RoIiwiRXJyb3IiLCJzdGFydCIsInNpemUiLCJyZWFkVUludDE2QkUiLCJuZXQiLCJ0aW1lcnMiLCJjb25zdGFudElwcyIsInRlYW1JcHMiLCJEU1NvY2tldFByb21pc2VQYWlyIiwicnMiLCJkcyIsInNvY2tldCIsInByb21pc2UiLCJkc1NvY2tldCIsImVtaXQiLCJSYXdTb2NrZXRQcm9taXNlUGFpciIsImdldFNvY2tldEZyb21JUCIsInBvcnQiLCJpcCIsIlNvY2tldCIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0Iiwib24iLCJlbmQiLCJkZXN0cm95IiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwiY29ubmVjdCIsImNvbm5lY3RUb1JvYm90IiwiYXN5bmMiLCJ0ZWFtTnVtYmVyIiwidGltZW91dCIsInBhaXJzIiwiTWF0aCIsInRydW5jIiwicmVwbGFjZSIsInJvYm90SVAiLCJpcEFkZHIiLCJnZXRTb2NrZXRGcm9tRFMiLCJjb25uZWN0b3JzIiwidGltZXIiLCJtcyIsInNldFRpbWVvdXQiLCJjbGVhclRpbWVvdXQiLCJ0aW1lclByb21pc2UiLCJmaXJzdERvbmUiLCJwcm9wZXJSYWNlIiwicHJvbWlzZXMiLCJpbmRleFByb21pc2VzIiwibWFwIiwiaW5kZXgiLCJjYXRjaCIsInJhY2UiLCJzcGxpY2UiLCJlIiwiZGlzcG9zZSIsIl9hIiwiY2FuY2VsIiwiX2IiLCJnIiwiRnVuY3Rpb24iLCJldmFsIiwiX19leHBvcnQiLCJnbG9iYWwiLCJzY29wZSIsInNlbGYiLCJhcHBseSIsIlRpbWVvdXQiLCJjbGVhckZuIiwiX2lkIiwiX2NsZWFyRm4iLCJhcmd1bWVudHMiLCJzZXRJbnRlcnZhbCIsImNsZWFySW50ZXJ2YWwiLCJjbG9zZSIsInVucmVmIiwicmVmIiwiZW5yb2xsIiwibXNlY3MiLCJfaWRsZVRpbWVvdXRJZCIsIl9pZGxlVGltZW91dCIsInVuZW5yb2xsIiwiX3VucmVmQWN0aXZlIiwiYWN0aXZlIiwiX29uVGltZW91dCIsInNldEltbWVkaWF0ZSIsImNsZWFySW1tZWRpYXRlIiwicHJvY2VzcyIsInJlZ2lzdGVySW1tZWRpYXRlIiwibmV4dEhhbmRsZSIsInRhc2tzQnlIYW5kbGUiLCJjdXJyZW50bHlSdW5uaW5nQVRhc2siLCJkb2MiLCJhdHRhY2hUbyIsImdldFByb3RvdHlwZU9mIiwiaGFuZGxlIiwibmV4dFRpY2siLCJydW5JZlByZXNlbnQiLCJwb3N0TWVzc2FnZSIsImltcG9ydFNjcmlwdHMiLCJwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzIiwib2xkT25NZXNzYWdlIiwib25tZXNzYWdlIiwiY2FuVXNlUG9zdE1lc3NhZ2UiLCJtZXNzYWdlUHJlZml4IiwicmFuZG9tIiwib25HbG9iYWxNZXNzYWdlIiwiZXZlbnQiLCJzb3VyY2UiLCJpbmRleE9mIiwiYXR0YWNoRXZlbnQiLCJpbnN0YWxsUG9zdE1lc3NhZ2VJbXBsZW1lbnRhdGlvbiIsIk1lc3NhZ2VDaGFubmVsIiwiY2hhbm5lbCIsInBvcnQxIiwicG9ydDIiLCJpbnN0YWxsTWVzc2FnZUNoYW5uZWxJbXBsZW1lbnRhdGlvbiIsImh0bWwiLCJkb2N1bWVudEVsZW1lbnQiLCJzY3JpcHQiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJpbnN0YWxsUmVhZHlTdGF0ZUNoYW5nZUltcGxlbWVudGF0aW9uIiwiYXJncyIsIkFycmF5IiwidGFzayIsInJ1biIsImNhY2hlZFNldFRpbWVvdXQiLCJjYWNoZWRDbGVhclRpbWVvdXQiLCJkZWZhdWx0U2V0VGltb3V0IiwiZGVmYXVsdENsZWFyVGltZW91dCIsInJ1blRpbWVvdXQiLCJmdW4iLCJjdXJyZW50UXVldWUiLCJxdWV1ZSIsImRyYWluaW5nIiwicXVldWVJbmRleCIsImNsZWFuVXBOZXh0VGljayIsImNvbmNhdCIsImRyYWluUXVldWUiLCJsZW4iLCJtYXJrZXIiLCJydW5DbGVhclRpbWVvdXQiLCJJdGVtIiwiYXJyYXkiLCJub29wIiwidGl0bGUiLCJicm93c2VyIiwiZW52IiwiYXJndiIsInZlcnNpb24iLCJ2ZXJzaW9ucyIsImFkZExpc3RlbmVyIiwib25jZSIsIm9mZiIsInJlbW92ZUxpc3RlbmVyIiwicHJlcGVuZExpc3RlbmVyIiwicHJlcGVuZE9uY2VMaXN0ZW5lciIsImxpc3RlbmVycyIsImJpbmRpbmciLCJjd2QiLCJjaGRpciIsImRpciIsInVtYXNrIiwiZXZlbnRzXzEiLCJtZXNzYWdlXzEiLCJwcm9taXNlY29uZF8xIiwicmlvY29ubmVjdG9yXzEiLCJSaW9Db25zb2xlIiwiRXZlbnRFbWl0dGVyIiwic3VwZXIiLCJjb25uZWN0ZWQiLCJjbGVhbnVwIiwiY29uZGl0aW9uIiwiUHJvbWlzZUNvbmRpdGlvbiIsImNsb3NlU29ja2V0Iiwic2V0Iiwid2FpdCIsInJlc2V0IiwicnVuRnVuY3Rpb24iLCJhc3luY0Z1bmN0aW9uIiwiY2xvc2VGdW5jIiwic3RvcCIsInNldE5vRGVsYXkiLCJzZXRLZWVwQWxpdmUiLCJ0YWciLCJvdXRwdXRCdWZmZXIiLCJleHRlbmRlZEJ1ZiIsImhhbmRsZURhdGEiLCJfZXZlbnRzIiwiX21heExpc3RlbmVycyIsImlzRnVuY3Rpb24iLCJhcmciLCJpc09iamVjdCIsImlzVW5kZWZpbmVkIiwiZGVmYXVsdE1heExpc3RlbmVycyIsInNldE1heExpc3RlbmVycyIsImlzTnVtYmVyIiwiaXNOYU4iLCJUeXBlRXJyb3IiLCJlciIsImhhbmRsZXIiLCJlcnJvciIsImVyciIsImNvbnRleHQiLCJsaXN0ZW5lciIsIm5ld0xpc3RlbmVyIiwid2FybmVkIiwidHJhY2UiLCJmaXJlZCIsImxpc3RlbmVyQ291bnQiLCJldmxpc3RlbmVyIiwiZW1pdHRlciIsImhhc0JlZW5TZXQiLCJjb25kU2V0IiwiaW50ZXJmYWNlc18xIiwiUmlvTG9nV2luZG93Iiwid2luZG93UHJvdiIsInJpb0NvblByb2l2ZGVyIiwid2VidmlldyIsInJpb0NvbnNvbGUiLCJydW5uaW5nIiwiZGlzcG9zYWJsZXMiLCJwYXVzZWRBcnJheSIsImhpZGRlbkFycmF5Iiwid2luZG93UHJvdmlkZXIiLCJyaW9Db25zb2xlUHJvdmlkZXIiLCJjcmVhdGVXZWJWaWV3IiwiY3JlYXRlUmlvQ29uc29sZSIsIm9uTWVzc2FnZVJlY2VpdmVkIiwib25Db25uZWN0aW9uQ2hhbmdlZCIsIm9uTmV3TWVzc2FnZVRvU2VuZCIsInNldFRlYW1OdW1iZXIiLCJzdGFydExpc3RlbmluZyIsImNyZWF0ZVdpbmRvd1ZpZXciLCJnZXRSaW9Db25zb2xlIiwib2xkIiwic2VuZFBhdXNlZCIsImRlc2VyaWFsaXplZExvZ3MiLCJoYW5kbGVTYXZlIiwibmV3VmFsdWUiLCJzZXRBdXRvUmVjb25uZWN0IiwiZGlzY29ubmVjdCIsIm51bWJlciIsInNoYXJlZHNjcmlwdF8xIiwidnNjb2RlIiwiYWNxdWlyZVZzQ29kZUFwaSIsInNjcm9sbFRvcCIsInNjcm9sbEhlaWdodCJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsS0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxJQUNBRyxFQUFBSCxFQUNBSSxHQUFBLEVBQ0FI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USxFQUFBMUksUUFDQXNILFFBQUFDLElBQUEsdUJBQ0E4QixLQUFBMk8sV0FBQVksY0FBQVcscUZDM0tBLE1BQUFDLEVBQUFyYyxFQUFBLEdBUU1zYyxFQUFTQyxtQkFFZnJjLEVBQUErRCxZQUFBLFdBQ0VvWSxFQUFBblIsZ0JBQWdCekksU0FBUytSLGtCQUczQnRVLEVBQUF3TCxXQUFBLFdBQ0VqSixTQUFTK1IsZ0JBQWdCZ0ksVUFBWS9aLFNBQVMrUixnQkFBZ0JpSSxjQUdoRXZjLEVBQUEwQyxZQUFBLFNBQTRCQyxHQUMxQnlaLEVBQU9sSixZQUFZdlEsRUFBUyxNQUc5Qm1HLE9BQU9DLGlCQUFpQixVQUFZNEssSUFDbEMsTUFBTXRJLEVBQXdCc0ksRUFBTXRJLEtBQ3BDOFEsRUFBQS9RLGNBQWNDIiwiZmlsZSI6InJpb2xvZ3BhZ2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMSk7XG4iLCIndXNlIHN0cmljdCc7XHJcblxyXG4vKiB0c2xpbnQ6ZGlzYWJsZTpwcmVmZXItY29uZGl0aW9uYWwtZXhwcmVzc2lvbiAqL1xyXG5pbXBvcnQgeyBJRXJyb3JNZXNzYWdlLCBJSVBDU2VuZE1lc3NhZ2UsIElQcmludE1lc3NhZ2UsIE1lc3NhZ2VUeXBlLCBSZWNlaXZlVHlwZXMsIFNlbmRUeXBlcyB9IGZyb20gJ3dwaWxpYi1yaW9sb2cnO1xyXG5pbXBvcnQgeyBjaGVja1Jlc2l6ZSwgc2Nyb2xsSW1wbCwgc2VuZE1lc3NhZ2UgfSBmcm9tICcuLi9zY3JpcHQvaW1wbHNjcmlwdCc7XHJcblxyXG5sZXQgcGF1c2VkID0gZmFsc2U7XHJcbmV4cG9ydCBmdW5jdGlvbiBvblBhdXNlKCkge1xyXG4gIGNvbnN0IHBhdXNlRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYXVzZScpO1xyXG4gIGlmIChwYXVzZUVsZW1lbnQgPT09IG51bGwpIHtcclxuICAgIHJldHVybjtcclxuICB9XHJcbiAgaWYgKHBhdXNlZCA9PT0gdHJ1ZSkge1xyXG4gICAgcGF1c2VkID0gZmFsc2U7XHJcbiAgICBwYXVzZUVsZW1lbnQuaW5uZXJIVE1MID0gJ1BhdXNlJztcclxuICAgIHNlbmRNZXNzYWdlKHtcclxuICAgICAgbWVzc2FnZTogZmFsc2UsXHJcbiAgICAgIHR5cGU6IFJlY2VpdmVUeXBlcy5QYXVzZSxcclxuICAgIH0pO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBwYXVzZWQgPSB0cnVlO1xyXG4gICAgcGF1c2VFbGVtZW50LmlubmVySFRNTCA9ICdQYXVzZWQ6IDAnO1xyXG4gICAgc2VuZE1lc3NhZ2Uoe1xyXG4gICAgICBtZXNzYWdlOiB0cnVlLFxyXG4gICAgICB0eXBlOiBSZWNlaXZlVHlwZXMuUGF1c2UsXHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbmxldCBkaXNjYXJkID0gZmFsc2U7XHJcbmV4cG9ydCBmdW5jdGlvbiBvbkRpc2NhcmQoKSB7XHJcbiAgY29uc3QgZEJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXNjYXJkJyk7XHJcbiAgaWYgKGRCdXR0b24gPT09IG51bGwpIHtcclxuICAgIHJldHVybjtcclxuICB9XHJcbiAgaWYgKGRpc2NhcmQgPT09IHRydWUpIHtcclxuICAgIGRpc2NhcmQgPSBmYWxzZTtcclxuICAgIGRCdXR0b24uaW5uZXJIVE1MID0gJ0Rpc2NhcmQnO1xyXG4gICAgc2VuZE1lc3NhZ2Uoe1xyXG4gICAgICBtZXNzYWdlOiBmYWxzZSxcclxuICAgICAgdHlwZTogUmVjZWl2ZVR5cGVzLkRpc2NhcmQsXHJcbiAgICB9KTtcclxuICB9IGVsc2Uge1xyXG4gICAgZGlzY2FyZCA9IHRydWU7XHJcbiAgICBkQnV0dG9uLmlubmVySFRNTCA9ICdSZXN1bWUnO1xyXG4gICAgc2VuZE1lc3NhZ2Uoe1xyXG4gICAgICBtZXNzYWdlOiB0cnVlLFxyXG4gICAgICB0eXBlOiBSZWNlaXZlVHlwZXMuRGlzY2FyZCxcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG9uQ2xlYXIoKSB7XHJcbiAgY29uc3QgbGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaXN0Jyk7XHJcbiAgaWYgKGxpc3QgPT09IG51bGwpIHtcclxuICAgIHJldHVybjtcclxuICB9XHJcbiAgbGlzdC5pbm5lckhUTUwgPSAnJztcclxufVxyXG5cclxubGV0IHNob3dXYXJuaW5ncyA9IHRydWU7XHJcbmV4cG9ydCBmdW5jdGlvbiBvblNob3dXYXJuaW5ncygpIHtcclxuICBjb25zdCB3YXJuaW5nc0J1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaG93d2FybmluZ3MnKTtcclxuICBpZiAod2FybmluZ3NCdXR0b24gPT09IG51bGwpIHtcclxuICAgIHJldHVybjtcclxuICB9XHJcbiAgaWYgKHNob3dXYXJuaW5ncyA9PT0gdHJ1ZSkge1xyXG4gICAgc2hvd1dhcm5pbmdzID0gZmFsc2U7XHJcbiAgICB3YXJuaW5nc0J1dHRvbi5pbm5lckhUTUwgPSAnU2hvdyBXYXJuaW5ncyc7XHJcbiAgfSBlbHNlIHtcclxuICAgIHNob3dXYXJuaW5ncyA9IHRydWU7XHJcbiAgICB3YXJuaW5nc0J1dHRvbi5pbm5lckhUTUwgPSAnRG9uXFwndCBTaG93IFdhcm5pbmdzJztcclxuICB9XHJcbiAgY29uc3QgdWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGlzdCcpO1xyXG4gIGlmICh1bCA9PT0gbnVsbCkge1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuICBjb25zdCBpdGVtcyA9IHVsLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdsaScpO1xyXG4gIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpwcmVmZXItZm9yLW9mXHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7ICsraSkge1xyXG4gICAgaWYgKGl0ZW1zW2ldLmRhdGFzZXQudHlwZSA9PT0gJ3dhcm5pbmcnKSB7XHJcbiAgICAgIGlmIChzaG93V2FybmluZ3MgPT09IHRydWUpIHtcclxuICAgICAgICBpdGVtc1tpXS5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZSc7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaXRlbXNbaV0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICBjaGVja1Jlc2l6ZSgpO1xyXG59XHJcblxyXG5sZXQgc2hvd1ByaW50cyA9IHRydWU7XHJcbmV4cG9ydCBmdW5jdGlvbiBvblNob3dQcmludHMoKSB7XHJcbiAgY29uc3QgcHJpbnRCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2hvd3ByaW50cycpO1xyXG4gIGlmIChwcmludEJ1dHRvbiA9PT0gbnVsbCkge1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuICBpZiAoc2hvd1ByaW50cyA9PT0gdHJ1ZSkge1xyXG4gICAgc2hvd1ByaW50cyA9IGZhbHNlO1xyXG4gICAgcHJpbnRCdXR0b24uaW5uZXJIVE1MID0gJ1Nob3cgUHJpbnRzJztcclxuICB9IGVsc2Uge1xyXG4gICAgc2hvd1ByaW50cyA9IHRydWU7XHJcbiAgICBwcmludEJ1dHRvbi5pbm5lckhUTUwgPSAnRG9uXFwndCBTaG93IFByaW50cyc7XHJcbiAgfVxyXG4gIGNvbnN0IHVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpc3QnKTtcclxuICBpZiAodWwgPT09IG51bGwpIHtcclxuICAgIHJldHVybjtcclxuICB9XHJcbiAgY29uc3QgaXRlbXMgPSB1bC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnbGknKTtcclxuICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6cHJlZmVyLWZvci1vZlxyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyArK2kpIHtcclxuICAgIGlmIChpdGVtc1tpXS5kYXRhc2V0LnR5cGUgPT09ICdwcmludCcpIHtcclxuICAgICAgaWYgKHNob3dQcmludHMgPT09IHRydWUpIHtcclxuICAgICAgICBpdGVtc1tpXS5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZSc7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaXRlbXNbaV0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICBjaGVja1Jlc2l6ZSgpO1xyXG59XHJcblxyXG5sZXQgYXV0b1JlY29ubmVjdCA9IHRydWU7XHJcbmV4cG9ydCBmdW5jdGlvbiBvbkF1dG9SZWNvbm5lY3QoKSB7XHJcbiAgaWYgKGF1dG9SZWNvbm5lY3QgPT09IHRydWUpIHtcclxuICAgIGF1dG9SZWNvbm5lY3QgPSBmYWxzZTtcclxuICAgIC8vIHNlbmQgYSBkaXNjb25uZWN0XHJcbiAgICBzZW5kTWVzc2FnZSh7XHJcbiAgICAgIG1lc3NhZ2U6IGZhbHNlLFxyXG4gICAgICB0eXBlOiBSZWNlaXZlVHlwZXMuUmVjb25uZWN0LFxyXG4gICAgfSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGF1dG9SZWNvbm5lY3QgPSB0cnVlO1xyXG4gICAgc2VuZE1lc3NhZ2Uoe1xyXG4gICAgICBtZXNzYWdlOiB0cnVlLFxyXG4gICAgICB0eXBlOiBSZWNlaXZlVHlwZXMuUmVjb25uZWN0LFxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGNvbnN0IGFyQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F1dG9yZWNvbm5lY3QnKTtcclxuICBpZiAoYXJCdXR0b24gPT09IG51bGwpIHtcclxuICAgIHJldHVybjtcclxuICB9XHJcbiAgaWYgKGF1dG9SZWNvbm5lY3QgPT09IHRydWUpIHtcclxuICAgIGFyQnV0dG9uLmlubmVySFRNTCA9ICdSZWNvbm5lY3QnO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBhckJ1dHRvbi5pbm5lckhUTUwgPSAnRGlzY29ubmVjdCc7XHJcbiAgfVxyXG5cclxufVxyXG5cclxubGV0IHNob3dUaW1lc3RhbXBzID0gZmFsc2U7XHJcbmV4cG9ydCBmdW5jdGlvbiBvblNob3dUaW1lc3RhbXBzKCkge1xyXG4gIGNvbnN0IHRzQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RpbWVzdGFtcHMnKTtcclxuICBpZiAodHNCdXR0b24gPT09IG51bGwpIHtcclxuICAgIHJldHVybjtcclxuICB9XHJcbiAgaWYgKHNob3dUaW1lc3RhbXBzID09PSB0cnVlKSB7XHJcbiAgICBzaG93VGltZXN0YW1wcyA9IGZhbHNlO1xyXG4gICAgdHNCdXR0b24uaW5uZXJIVE1MID0gJ1Nob3cgVGltZXN0YW1wcyc7XHJcbiAgfSBlbHNlIHtcclxuICAgIHNob3dUaW1lc3RhbXBzID0gdHJ1ZTtcclxuICAgIHRzQnV0dG9uLmlubmVySFRNTCA9ICdEb25cXCd0IFNob3cgVGltZXN0YW1wcyc7XHJcbiAgfVxyXG4gIGNvbnN0IHVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpc3QnKTtcclxuICBpZiAodWwgPT09IG51bGwpIHtcclxuICAgIHJldHVybjtcclxuICB9XHJcbiAgY29uc3QgaXRlbXMgPSB1bC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnbGknKTtcclxuICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6cHJlZmVyLWZvci1vZlxyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyArK2kpIHtcclxuICAgIGNvbnN0IHNwYW5zID0gaXRlbXNbaV0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NwYW4nKTtcclxuICAgIGlmIChzcGFucyA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIGNvbnRpbnVlO1xyXG4gICAgfVxyXG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOnByZWZlci1mb3Itb2ZcclxuICAgIGZvciAobGV0IGogPSAwOyBqIDwgc3BhbnMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgY29uc3Qgc3BhbiA9IHNwYW5zW2pdO1xyXG4gICAgICBpZiAoc3Bhbi5oYXNBdHRyaWJ1dGUoJ2RhdGEtdGltZXN0YW1wJykpIHtcclxuICAgICAgICBpZiAoc2hvd1RpbWVzdGFtcHMgPT09IHRydWUpIHtcclxuICAgICAgICAgIHNwYW4uc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUnO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBzcGFuLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIGNoZWNrUmVzaXplKCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBvblNhdmVMb2coKSB7XHJcbiAgY29uc3QgdWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGlzdCcpO1xyXG4gIGlmICh1bCA9PT0gbnVsbCkge1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuICBjb25zdCBpdGVtcyA9IHVsLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdsaScpO1xyXG4gIGNvbnN0IGxvZ3M6IHN0cmluZ1tdID0gW107XHJcblxyXG4gIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpwcmVmZXItZm9yLW9mXHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7ICsraSkge1xyXG4gICAgY29uc3QgbSA9IGl0ZW1zW2ldLmRhdGFzZXQubWVzc2FnZTtcclxuICAgIGlmIChtID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgbG9ncy5wdXNoKG0pO1xyXG4gIH1cclxuXHJcbiAgc2VuZE1lc3NhZ2Uoe1xyXG4gICAgbWVzc2FnZTogbG9ncyxcclxuICAgIHR5cGU6IFJlY2VpdmVUeXBlcy5TYXZlLFxyXG4gIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gb25Db25uZWN0KCkge1xyXG4gIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdXRvcmVjb25uZWN0Jyk7XHJcbiAgaWYgKGJ1dHRvbiA9PT0gbnVsbCkge1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuICBidXR0b24uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ0dyZWVuJztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG9uRGlzY29ubmVjdCgpIHtcclxuICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXV0b3JlY29ubmVjdCcpO1xyXG4gIGlmIChidXR0b24gPT09IG51bGwpIHtcclxuICAgIHJldHVybjtcclxuICB9XHJcbiAgYnV0dG9uLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdSZWQnO1xyXG59XHJcblxyXG5mdW5jdGlvbiBpbnNlcnRNZXNzYWdlKHRzOiBudW1iZXIsIGxpbmU6IHN0cmluZywgbGk6IEhUTUxMSUVsZW1lbnQsIGNvbG9yPzogc3RyaW5nKSB7XHJcbiAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgY29uc3QgdHNTcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG4gIHRzU3Bhbi5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0cy50b0ZpeGVkKDMpICsgJzogJykpO1xyXG4gIHRzU3Bhbi5kYXRhc2V0LnRpbWVzdGFtcCA9ICd0cnVlJztcclxuICBpZiAoc2hvd1RpbWVzdGFtcHMgPT09IHRydWUpIHtcclxuICAgIHRzU3Bhbi5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZSc7XHJcbiAgfSBlbHNlIHtcclxuICAgIHRzU3Bhbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gIH1cclxuICBkaXYuYXBwZW5kQ2hpbGQodHNTcGFuKTtcclxuICBjb25zdCBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG4gIGNvbnN0IHNwbGl0ID0gbGluZS5zcGxpdCgnXFxuJyk7XHJcbiAgbGV0IGZpcnN0ID0gdHJ1ZTtcclxuICBmb3IgKGNvbnN0IGl0ZW0gb2Ygc3BsaXQpIHtcclxuICAgIGlmIChpdGVtLnRyaW0oKSA9PT0gJycpIHtcclxuICAgICAgY29udGludWU7XHJcbiAgICB9XHJcbiAgICBpZiAoZmlyc3QgPT09IGZhbHNlKSB7XHJcbiAgICAgIHNwYW4uYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnInKSk7XHJcbiAgICB9XHJcbiAgICBmaXJzdCA9IGZhbHNlO1xyXG4gICAgY29uc3QgdE5vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShpdGVtKTtcclxuICAgIHNwYW4uYXBwZW5kQ2hpbGQodE5vZGUpO1xyXG4gIH1cclxuICBpZiAoY29sb3IgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgc3Bhbi5zdHlsZS5jb2xvciA9IGNvbG9yO1xyXG4gIH1cclxuICBkaXYuYXBwZW5kQ2hpbGQoc3Bhbik7XHJcbiAgbGkuYXBwZW5kQ2hpbGQoZGl2KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaW5zZXJ0U3RhY2tUcmFjZShzdDogc3RyaW5nLCBsaTogSFRNTExJRWxlbWVudCwgY29sb3I/OiBzdHJpbmcpIHtcclxuICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICBjb25zdCBzcGxpdCA9IHN0LnNwbGl0KCdcXG4nKTtcclxuICBsZXQgZmlyc3QgPSB0cnVlO1xyXG4gIGZvciAoY29uc3QgaXRlbSBvZiBzcGxpdCkge1xyXG4gICAgaWYgKGl0ZW0udHJpbSgpID09PSAnJykge1xyXG4gICAgICBjb250aW51ZTtcclxuICAgIH1cclxuICAgIGlmIChmaXJzdCA9PT0gZmFsc2UpIHtcclxuICAgICAgZGl2LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2JyJykpO1xyXG4gICAgfVxyXG4gICAgZmlyc3QgPSBmYWxzZTtcclxuICAgIGNvbnN0IHROb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJ1xcdTAwYTBcXHUwMGEwXFx1MDBhMFxcdTAwYTAgYXQ6ICcgKyBpdGVtKTtcclxuICAgIGRpdi5hcHBlbmRDaGlsZCh0Tm9kZSk7XHJcbiAgfVxyXG4gIGlmIChjb2xvciAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICBkaXYuc3R5bGUuY29sb3IgPSBjb2xvcjtcclxuICB9XHJcbiAgbGkuYXBwZW5kQ2hpbGQoZGl2KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaW5zZXJ0TG9jYXRpb24obG9jOiBzdHJpbmcsIGxpOiBIVE1MTElFbGVtZW50LCBjb2xvcj86IHN0cmluZykge1xyXG4gIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gIGNvbnN0IHNwbGl0ID0gbG9jLnNwbGl0KCdcXG4nKTtcclxuICBsZXQgZmlyc3QgPSB0cnVlO1xyXG4gIGZvciAoY29uc3QgaXRlbSBvZiBzcGxpdCkge1xyXG4gICAgaWYgKGl0ZW0udHJpbSgpID09PSAnJykge1xyXG4gICAgICBjb250aW51ZTtcclxuICAgIH1cclxuICAgIGlmIChmaXJzdCA9PT0gZmFsc2UpIHtcclxuICAgICAgbGkuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnInKSk7XHJcbiAgICB9XHJcbiAgICBmaXJzdCA9IGZhbHNlO1xyXG4gICAgY29uc3QgdE5vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnXFx1MDBhMFxcdTAwYTAgZnJvbTogJyArIGl0ZW0pO1xyXG4gICAgbGkuYXBwZW5kQ2hpbGQodE5vZGUpO1xyXG4gIH1cclxuICBpZiAoY29sb3IgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgZGl2LnN0eWxlLmNvbG9yID0gY29sb3I7XHJcbiAgfVxyXG4gIGxpLmFwcGVuZENoaWxkKGRpdik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBhZGRNZXNzYWdlKG1lc3NhZ2U6IElQcmludE1lc3NhZ2UgfCBJRXJyb3JNZXNzYWdlKSB7XHJcbiAgaWYgKG1lc3NhZ2UubWVzc2FnZVR5cGUgPT09IE1lc3NhZ2VUeXBlLlByaW50KSB7XHJcbiAgICBhZGRQcmludChtZXNzYWdlIGFzIElQcmludE1lc3NhZ2UpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBhZGRFcnJvcihtZXNzYWdlIGFzIElFcnJvck1lc3NhZ2UpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gbGltaXRMaXN0KCkge1xyXG4gIGNvbnN0IHVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpc3QnKSBhcyBIVE1MVUxpc3RFbGVtZW50O1xyXG4gIGlmICh1bCA9PT0gbnVsbCkge1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuICBpZiAodWwuY2hpbGRFbGVtZW50Q291bnQgPiAxMDAwICYmIHVsLmZpcnN0Q2hpbGQgIT09IG51bGwpIHtcclxuICAgIHVsLnJlbW92ZUNoaWxkKHVsLmZpcnN0Q2hpbGQpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGFkZFByaW50KG1lc3NhZ2U6IElQcmludE1lc3NhZ2UpIHtcclxuICBsaW1pdExpc3QoKTtcclxuICBjb25zdCB1bCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaXN0JykgYXMgSFRNTFVMaXN0RWxlbWVudDtcclxuICBpZiAodWwgPT09IG51bGwpIHtcclxuICAgIHJldHVybjtcclxuICB9XHJcbiAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xyXG4gIGxpLnN0eWxlLmZvbnRGYW1pbHkgPSAnQ29uc29sYXMsIFwiQ291cmllciBOZXdcIiwgbW9ub3NwYWNlJztcclxuICBpbnNlcnRNZXNzYWdlKG1lc3NhZ2UudGltZXN0YW1wLCBtZXNzYWdlLmxpbmUsIGxpKTtcclxuICBjb25zdCBzdHIgPSBKU09OLnN0cmluZ2lmeShtZXNzYWdlKTtcclxuICBsaS5kYXRhc2V0Lm1lc3NhZ2UgPSBzdHI7XHJcbiAgbGkuZGF0YXNldC50eXBlID0gJ3ByaW50JztcclxuICBpZiAoc2hvd1ByaW50cyA9PT0gdHJ1ZSkge1xyXG4gICAgbGkuc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUnO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBsaS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gIH1cclxuICB1bC5hcHBlbmRDaGlsZChsaSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBleHBhbmRFcnJvcihtZXNzYWdlOiBJRXJyb3JNZXNzYWdlLCBsaTogSFRNTExJRWxlbWVudCwgY29sb3I/OiBzdHJpbmcpIHtcclxuICAvLyBGaXJzdCBhcHBlbmQgdGhlIG1lc3NhZ2VcclxuICBpbnNlcnRNZXNzYWdlKG1lc3NhZ2UudGltZXN0YW1wLCBtZXNzYWdlLmRldGFpbHMsIGxpLCBjb2xvcik7XHJcbiAgLy8gVGhlbiBhcHBlbmQgbG9jYXRpb24sIHRhYmJlZCBpbiBvbmNlXHJcbiAgaW5zZXJ0TG9jYXRpb24obWVzc2FnZS5sb2NhdGlvbiwgbGkpO1xyXG4gIC8vIFRoZW4gYXBwZW5kIHN0YWNrIHRyYWNlLCB0YWJiZWQgaW4gdHdpY2VcclxuICBpbnNlcnRTdGFja1RyYWNlKG1lc3NhZ2UuY2FsbFN0YWNrLCBsaSk7XHJcbiAgbGkuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnInKSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBhZGRFcnJvcihtZXNzYWdlOiBJRXJyb3JNZXNzYWdlKSB7XHJcbiAgbGltaXRMaXN0KCk7XHJcbiAgY29uc3QgdWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGlzdCcpO1xyXG4gIGlmICh1bCA9PT0gbnVsbCkge1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuICBjb25zdCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XHJcbiAgbGkuc3R5bGUuZm9udEZhbWlseSA9ICdDb25zb2xhcywgXCJDb3VyaWVyIE5ld1wiLCBtb25vc3BhY2UnO1xyXG4gIGNvbnN0IHN0ciA9IEpTT04uc3RyaW5naWZ5KG1lc3NhZ2UpO1xyXG4gIGxpLmRhdGFzZXQuZXhwYW5kZWQgPSAnZmFsc2UnO1xyXG4gIGxpLmRhdGFzZXQubWVzc2FnZSA9IHN0cjtcclxuICBpZiAobWVzc2FnZS5tZXNzYWdlVHlwZSA9PT0gTWVzc2FnZVR5cGUuV2FybmluZykge1xyXG4gICAgbGkuZGF0YXNldC50eXBlID0gJ3dhcm5pbmcnO1xyXG4gICAgaW5zZXJ0TWVzc2FnZShtZXNzYWdlLnRpbWVzdGFtcCwgbWVzc2FnZS5kZXRhaWxzLCBsaSwgJ1llbGxvdycpO1xyXG4gICAgaWYgKHNob3dXYXJuaW5ncyA9PT0gdHJ1ZSkge1xyXG4gICAgICBsaS5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZSc7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBsaS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgfVxyXG4gIH0gZWxzZSB7XHJcbiAgICBsaS5kYXRhc2V0LnR5cGUgPSAnZXJyb3InO1xyXG4gICAgaW5zZXJ0TWVzc2FnZShtZXNzYWdlLnRpbWVzdGFtcCwgbWVzc2FnZS5kZXRhaWxzLCBsaSwgJ1JlZCcpO1xyXG4gIH1cclxuICBsaS5vbmNsaWNrID0gKCkgPT4ge1xyXG4gICAgaWYgKGxpLmRhdGFzZXQuZXhwYW5kZWQgPT09ICd0cnVlJykge1xyXG4gICAgICAvLyBzaHJpbmtcclxuICAgICAgbGkuZGF0YXNldC5leHBhbmRlZCA9ICdmYWxzZSc7XHJcbiAgICAgIGlmIChsaS5kYXRhc2V0Lm1lc3NhZ2UgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKGxpLmRhdGFzZXQubWVzc2FnZSkgYXMgSVByaW50TWVzc2FnZSB8IElFcnJvck1lc3NhZ2U7XHJcbiAgICAgIGxpLmlubmVySFRNTCA9ICcnO1xyXG4gICAgICBpZiAobGkuZGF0YXNldC50eXBlID09PSAnd2FybmluZycpIHtcclxuICAgICAgICBpbnNlcnRNZXNzYWdlKHBhcnNlZC50aW1lc3RhbXAsIChwYXJzZWQgYXMgSUVycm9yTWVzc2FnZSkuZGV0YWlscywgbGksICdZZWxsb3cnKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpbnNlcnRNZXNzYWdlKHBhcnNlZC50aW1lc3RhbXAsIChwYXJzZWQgYXMgSUVycm9yTWVzc2FnZSkuZGV0YWlscywgbGksICdSZWQnKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gZXhwYW5kXHJcbiAgICAgIGxpLmRhdGFzZXQuZXhwYW5kZWQgPSAndHJ1ZSc7XHJcbiAgICAgIGlmIChsaS5kYXRhc2V0Lm1lc3NhZ2UgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKGxpLmRhdGFzZXQubWVzc2FnZSk7XHJcbiAgICAgIGxpLmlubmVySFRNTCA9ICcnO1xyXG4gICAgICBpZiAobGkuZGF0YXNldC50eXBlID09PSAnd2FybmluZycpIHtcclxuICAgICAgICBleHBhbmRFcnJvcihwYXJzZWQgYXMgSUVycm9yTWVzc2FnZSwgbGksICdZZWxsb3cnKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBleHBhbmRFcnJvcihwYXJzZWQgYXMgSUVycm9yTWVzc2FnZSwgbGksICdSZWQnKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgY2hlY2tSZXNpemUoKTtcclxuICB9O1xyXG4gIHVsLmFwcGVuZENoaWxkKGxpKTtcclxufVxyXG5cclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpID0+IHtcclxuICBjaGVja1Jlc2l6ZSgpO1xyXG59KTtcclxuXHJcbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1hbnlcclxuZnVuY3Rpb24gaGFuZGxlRmlsZVNlbGVjdChldnQ6IGFueSkge1xyXG4gIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby11bnNhZmUtYW55XHJcbiAgY29uc3QgZmlsZXM6IEZpbGVMaXN0ID0gZXZ0LnRhcmdldC5maWxlczsgLy8gZmlsZWxpc3RcclxuICBjb25zdCBmaXJzdEZpbGUgPSBmaWxlc1swXTtcclxuICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xyXG4gIHJlYWRlci5vbmxvYWQgPSAobG9hZGVkOiBFdmVudCkgPT4ge1xyXG4gICAgY29uc3QgdGFyZ2V0OiBGaWxlUmVhZGVyID0gbG9hZGVkLnRhcmdldCBhcyBGaWxlUmVhZGVyO1xyXG4gICAgY29uc3QgcGFyc2VkID0gSlNPTi5wYXJzZSh0YXJnZXQucmVzdWx0IGFzIHN0cmluZykgYXMgQXJyYXk8SVByaW50TWVzc2FnZSB8IElFcnJvck1lc3NhZ2U+O1xyXG4gICAgZm9yIChjb25zdCBwIG9mIHBhcnNlZCkge1xyXG4gICAgICBhZGRNZXNzYWdlKHApO1xyXG4gICAgfVxyXG4gICAgY2hlY2tSZXNpemUoKTtcclxuICB9O1xyXG4gIHJlYWRlci5yZWFkQXNUZXh0KGZpcnN0RmlsZSk7XHJcbn1cclxuXHJcbmxldCBjdXJyZW50U2NyZWVuSGVpZ2h0ID0gMTAwO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrUmVzaXplSW1wbChlbGVtZW50OiBIVE1MRWxlbWVudCkge1xyXG4gIGNvbnN0IGFsbG93ZWRIZWlnaHQgPSBlbGVtZW50LmNsaWVudEhlaWdodCAtIGN1cnJlbnRTY3JlZW5IZWlnaHQ7XHJcbiAgY29uc3QgdWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGlzdCcpO1xyXG4gIGlmICh1bCA9PT0gbnVsbCkge1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuICBjb25zdCBsaXN0SGVpZ2h0ID0gdWwuY2xpZW50SGVpZ2h0O1xyXG4gIGlmIChsaXN0SGVpZ2h0IDwgYWxsb3dlZEhlaWdodCkge1xyXG4gICAgdWwuc3R5bGUucG9zaXRpb24gPSAnZml4ZWQnO1xyXG4gICAgdWwuc3R5bGUuYm90dG9tID0gY3VycmVudFNjcmVlbkhlaWdodCArICdweCc7XHJcbiAgfSBlbHNlIHtcclxuICAgIHVsLnN0eWxlLnBvc2l0aW9uID0gJ3N0YXRpYyc7XHJcbiAgICB1bC5zdHlsZS5ib3R0b20gPSAnYXV0byc7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaGFuZGxlTWVzc2FnZShkYXRhOiBJSVBDU2VuZE1lc3NhZ2UpOiB2b2lkIHtcclxuICBzd2l0Y2ggKGRhdGEudHlwZSkge1xyXG4gICAgY2FzZSBTZW5kVHlwZXMuTmV3OlxyXG4gICAgICBhZGRNZXNzYWdlKGRhdGEubWVzc2FnZSBhcyBJUHJpbnRNZXNzYWdlIHwgSUVycm9yTWVzc2FnZSk7XHJcbiAgICAgIHNjcm9sbEltcGwoKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlIFNlbmRUeXBlcy5CYXRjaDpcclxuICAgICAgZm9yIChjb25zdCBtZXNzYWdlIG9mIGRhdGEubWVzc2FnZSBhcyBBcnJheTxJUHJpbnRNZXNzYWdlIHwgSUVycm9yTWVzc2FnZT4pIHtcclxuICAgICAgICBhZGRNZXNzYWdlKG1lc3NhZ2UpO1xyXG4gICAgICB9XHJcbiAgICAgIHNjcm9sbEltcGwoKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlIFNlbmRUeXBlcy5QYXVzZVVwZGF0ZTpcclxuICAgICAgY29uc3QgcGF1c2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGF1c2UnKTtcclxuICAgICAgaWYgKHBhdXNlICE9PSBudWxsKSB7XHJcbiAgICAgICAgcGF1c2UuaW5uZXJIVE1MID0gJ1BhdXNlZDogJyArIChkYXRhLm1lc3NhZ2UgYXMgbnVtYmVyKTtcclxuICAgICAgfVxyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgU2VuZFR5cGVzLkNvbm5lY3Rpb25DaGFuZ2VkOlxyXG4gICAgICBjb25zdCBiTWVzc2FnZTogYm9vbGVhbiA9IGRhdGEubWVzc2FnZSBhcyBib29sZWFuO1xyXG4gICAgICBpZiAoYk1lc3NhZ2UgPT09IHRydWUpIHtcclxuICAgICAgICBvbkNvbm5lY3QoKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBvbkRpc2Nvbm5lY3QoKTtcclxuICAgICAgfVxyXG4gICAgICBicmVhaztcclxuICAgIGRlZmF1bHQ6XHJcbiAgICAgIGJyZWFrO1xyXG4gIH1cclxuICBjaGVja1Jlc2l6ZSgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVTcGxpdFVsKGxlZnQ6IGJvb2xlYW4pOiBIVE1MVUxpc3RFbGVtZW50IHtcclxuICBjb25zdCBzcGxpdERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7XHJcbiAgc3BsaXREaXYuc3R5bGUucG9zaXRpb24gPSAnZml4ZWQnO1xyXG4gIHNwbGl0RGl2LnN0eWxlLmJvdHRvbSA9ICcwcHgnO1xyXG4gIGlmIChsZWZ0KSB7XHJcbiAgICBzcGxpdERpdi5zdHlsZS5sZWZ0ID0gJzBweCc7XHJcbiAgfSBlbHNlIHtcclxuICAgIHNwbGl0RGl2LnN0eWxlLnJpZ2h0ID0gJzBweCc7XHJcbiAgfVxyXG4gIHNwbGl0RGl2LnN0eWxlLmxpc3RTdHlsZVR5cGUgPSAnbm9uZSc7XHJcbiAgc3BsaXREaXYuc3R5bGUucGFkZGluZyA9ICcwJztcclxuICBzcGxpdERpdi5zdHlsZS53aWR0aCA9ICc0OS44JSc7XHJcbiAgc3BsaXREaXYuc3R5bGUubWFyZ2luQm90dG9tID0gJzFweCc7XHJcbiAgcmV0dXJuIHNwbGl0RGl2O1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVCdXR0b24oaWQ6IHN0cmluZywgdGV4dDogc3RyaW5nLCBjYWxsYmFjazogKCkgPT4gdm9pZCk6IEhUTUxMSUVsZW1lbnQge1xyXG4gIGNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcclxuICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICBidXR0b24uaWQgPSBpZDtcclxuICBidXR0b24uc3R5bGUud2lkdGggPSAnMTAwJSc7XHJcbiAgYnV0dG9uLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRleHQpKTtcclxuICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjYWxsYmFjayk7XHJcbiAgbGkuYXBwZW5kQ2hpbGQoYnV0dG9uKTtcclxuICByZXR1cm4gbGk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9uQ2hhbmdlVGVhbU51bWJlcigpIHtcclxuICBjb25zdCBuZXdOdW1iZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGVhbU51bWJlcicpO1xyXG4gIGNvbnNvbGUubG9nKCdmaW5kaW5nIHRlYW0gbnVtYmVyJyk7XHJcbiAgaWYgKG5ld051bWJlciA9PT0gbnVsbCkge1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuICBjb25zb2xlLmxvZygnc2VuZGluZyBtZXNzYWdlJyk7XHJcbiAgc2VuZE1lc3NhZ2Uoe1xyXG4gICAgbWVzc2FnZTogcGFyc2VJbnQoKG5ld051bWJlciBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSwgMTApLFxyXG4gICAgdHlwZTogUmVjZWl2ZVR5cGVzLkNoYW5nZU51bWJlcixcclxuICB9KTtcclxuICBjb25zb2xlLmxvZygnc2VudCBtZXNzYWdlJyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNldExpdmVQYWdlKCkge1xyXG4gIGNvbnN0IG1kdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYWluRGl2Jyk7XHJcbiAgaWYgKG1kdiA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG4gIGNvbnN0IG1haW5EaXY6IEhUTUxEaXZFbGVtZW50ID0gbWR2IGFzIEhUTUxEaXZFbGVtZW50O1xyXG4gIGN1cnJlbnRTY3JlZW5IZWlnaHQgPSAxMDA7XHJcbiAgbWFpbkRpdi5pbm5lckhUTUwgPSAnJztcclxuICBjb25zdCB1bCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7XHJcbiAgdWwuaWQgPSAnbGlzdCc7XHJcbiAgdWwuc3R5bGUubGlzdFN0eWxlVHlwZSA9ICdub25lJztcclxuICB1bC5zdHlsZS5wYWRkaW5nID0gJzAnO1xyXG4gIG1haW5EaXYuYXBwZW5kQ2hpbGQodWwpO1xyXG4gIGNvbnN0IHNwbGl0RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgc3BsaXREaXYuc3R5bGUuaGVpZ2h0ID0gJzEwMHB4JztcclxuICBtYWluRGl2LmFwcGVuZENoaWxkKHNwbGl0RGl2KTtcclxuICBjb25zdCBsZWZ0TGlzdCA9IGNyZWF0ZVNwbGl0VWwodHJ1ZSk7XHJcbiAgbGVmdExpc3QuYXBwZW5kQ2hpbGQoY3JlYXRlQnV0dG9uKCdwYXVzZScsICdQYXVzZScsIG9uUGF1c2UpKTtcclxuICBsZWZ0TGlzdC5hcHBlbmRDaGlsZChjcmVhdGVCdXR0b24oJ2Rpc2NhcmQnLCAnRGlzY2FyZCcsIG9uRGlzY2FyZCkpO1xyXG4gIGxlZnRMaXN0LmFwcGVuZENoaWxkKGNyZWF0ZUJ1dHRvbignY2xlYXInLCAnQ2xlYXInLCBvbkNsZWFyKSk7XHJcbiAgbGVmdExpc3QuYXBwZW5kQ2hpbGQoY3JlYXRlQnV0dG9uKCdzaG93cHJpbnRzJywgJ0RvblxcJ3QgU2hvdyBQcmludHMnLCBvblNob3dQcmludHMpKTtcclxuICBsZWZ0TGlzdC5hcHBlbmRDaGlsZChjcmVhdGVCdXR0b24oJ3N3aXRjaFBhZ2UnLCAnU3dpdGNoIHRvIFZpZXdlcicsICgpID0+IHtcclxuICAgIHNldFZpZXdlclBhZ2UoKTtcclxuICB9KSk7XHJcbiAgbWFpbkRpdi5hcHBlbmRDaGlsZChsZWZ0TGlzdCk7XHJcblxyXG4gIGNvbnN0IHJpZ2h0TGlzdCA9IGNyZWF0ZVNwbGl0VWwoZmFsc2UpO1xyXG4gIHJpZ2h0TGlzdC5hcHBlbmRDaGlsZChjcmVhdGVCdXR0b24oJ3Nob3d3YXJuaW5ncycsICdEb25cXCd0IFNob3cgV2FybmluZ3MnLCBvblNob3dXYXJuaW5ncykpO1xyXG4gIHJpZ2h0TGlzdC5hcHBlbmRDaGlsZChjcmVhdGVCdXR0b24oJ2F1dG9yZWNvbm5lY3QnLCAnRGlzY29ubmVjdCcsIG9uQXV0b1JlY29ubmVjdCkpO1xyXG4gIHJpZ2h0TGlzdC5hcHBlbmRDaGlsZChjcmVhdGVCdXR0b24oJ3RpbWVzdGFtcHMnLCAnU2hvdyBUaW1lc3RhbXBzJywgb25TaG93VGltZXN0YW1wcykpO1xyXG4gIHJpZ2h0TGlzdC5hcHBlbmRDaGlsZChjcmVhdGVCdXR0b24oJ3NhdmVsb3QnLCAnU2F2ZSBMb2cnLCBvblNhdmVMb2cpKTtcclxuICBjb25zdCB0ZWFtTnVtYmVyVWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xyXG4gIGNvbnN0IHRlYW1OdW1iZXJJID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcclxuICB0ZWFtTnVtYmVySS5pZCA9ICd0ZWFtTnVtYmVyJztcclxuICB0ZWFtTnVtYmVySS50eXBlID0gJ251bWJlcic7XHJcbiAgdGVhbU51bWJlckkuc3R5bGUud2lkdGggPSAnNTAlJztcclxuICBjb25zdCB0ZWFtTnVtYmVyQiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gIHRlYW1OdW1iZXJCLmlkID0gJ2NoYW5nZVRlYW1OdW1iZXInO1xyXG4gIHRlYW1OdW1iZXJCLnN0eWxlLndpZHRoID0gJzI0LjklJztcclxuICB0ZWFtTnVtYmVyQi5zdHlsZS5yaWdodCA9ICcwJztcclxuICB0ZWFtTnVtYmVyQi5zdHlsZS5wb3NpdGlvbiA9ICdmaXhlZCc7XHJcbiAgdGVhbU51bWJlckIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbkNoYW5nZVRlYW1OdW1iZXIpO1xyXG4gIHRlYW1OdW1iZXJCLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCdTZXQgVGVhbSBOdW1iZXInKSk7XHJcbiAgdGVhbU51bWJlclVsLmFwcGVuZENoaWxkKHRlYW1OdW1iZXJJKTtcclxuICB0ZWFtTnVtYmVyVWwuYXBwZW5kQ2hpbGQodGVhbU51bWJlckIpO1xyXG4gIHJpZ2h0TGlzdC5hcHBlbmRDaGlsZCh0ZWFtTnVtYmVyVWwpO1xyXG4gIG1haW5EaXYuYXBwZW5kQ2hpbGQocmlnaHRMaXN0KTtcclxuICBpZiAoYXV0b1JlY29ubmVjdCAhPT0gdHJ1ZSkge1xyXG4gICAgb25BdXRvUmVjb25uZWN0KCk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2V0Vmlld2VyUGFnZSgpIHtcclxuICBjb25zdCBtZHYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFpbkRpdicpO1xyXG4gIGlmIChtZHYgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuICBpZiAoYXV0b1JlY29ubmVjdCA9PT0gdHJ1ZSkge1xyXG4gICAgb25BdXRvUmVjb25uZWN0KCk7XHJcbiAgfVxyXG4gIGNvbnN0IG1haW5EaXY6IEhUTUxEaXZFbGVtZW50ID0gbWR2IGFzIEhUTUxEaXZFbGVtZW50O1xyXG4gIGN1cnJlbnRTY3JlZW5IZWlnaHQgPSA2MDtcclxuICBtYWluRGl2LmlubmVySFRNTCA9ICcnO1xyXG4gIGNvbnN0IHVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTtcclxuICB1bC5pZCA9ICdsaXN0JztcclxuICB1bC5zdHlsZS5saXN0U3R5bGVUeXBlID0gJ25vbmUnO1xyXG4gIHVsLnN0eWxlLnBhZGRpbmcgPSAnMCc7XHJcbiAgbWFpbkRpdi5hcHBlbmRDaGlsZCh1bCk7XHJcbiAgY29uc3Qgc3BsaXREaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICBzcGxpdERpdi5zdHlsZS5oZWlnaHQgPSAnNjBweCc7XHJcbiAgbWFpbkRpdi5hcHBlbmRDaGlsZChzcGxpdERpdik7XHJcblxyXG4gIGNvbnN0IGxlZnRMaXN0ID0gY3JlYXRlU3BsaXRVbCh0cnVlKTtcclxuICBjb25zdCBmaWxlSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xyXG4gIGZpbGVJbnB1dC50eXBlID0gJ2ZpbGUnO1xyXG4gIGZpbGVJbnB1dC5pZCA9ICdvcGVuRmlsZSc7XHJcbiAgZmlsZUlucHV0Lm5hbWUgPSAnZmlsZXNbXSc7XHJcbiAgZmlsZUlucHV0LnN0eWxlLndpZHRoID0gJzEwMCUnO1xyXG4gIGZpbGVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBoYW5kbGVGaWxlU2VsZWN0LCBmYWxzZSk7XHJcbiAgbGVmdExpc3QuYXBwZW5kQ2hpbGQoZmlsZUlucHV0KTtcclxuICBsZWZ0TGlzdC5hcHBlbmRDaGlsZChjcmVhdGVCdXR0b24oJ3Nob3dwcmludHMnLCAnRG9uXFwndCBTaG93IFByaW50cycsIG9uU2hvd1ByaW50cykpO1xyXG4gIGxlZnRMaXN0LmFwcGVuZENoaWxkKGNyZWF0ZUJ1dHRvbignc3dpdGNoUGFnZScsICdTd2l0Y2ggdG8gTGl2ZScsICgpID0+IHtcclxuICAgIHNldExpdmVQYWdlKCk7XHJcbiAgfSkpO1xyXG4gIG1haW5EaXYuYXBwZW5kQ2hpbGQobGVmdExpc3QpO1xyXG5cclxuICBjb25zdCByaWdodExpc3QgPSBjcmVhdGVTcGxpdFVsKGZhbHNlKTtcclxuICByaWdodExpc3QuYXBwZW5kQ2hpbGQoY3JlYXRlQnV0dG9uKCdzaG93d2FybmluZ3MnLCAnRG9uXFwndCBTaG93IFdhcm5pbmdzJywgb25TaG93V2FybmluZ3MpKTtcclxuICByaWdodExpc3QuYXBwZW5kQ2hpbGQoY3JlYXRlQnV0dG9uKCd0aW1lc3RhbXBzJywgJ1Nob3cgVGltZXN0YW1wcycsIG9uU2hvd1RpbWVzdGFtcHMpKTtcclxuXHJcbiAgbWFpbkRpdi5hcHBlbmRDaGlsZChyaWdodExpc3QpO1xyXG59XHJcblxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIChfOiBFdmVudCkgPT4ge1xyXG4gIHNldExpdmVQYWdlKCk7XHJcbn0pO1xyXG4iLCIndXNlIHN0cmljdCc7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIFNlbmRUeXBlcztcclxuKGZ1bmN0aW9uIChTZW5kVHlwZXMpIHtcclxuICAgIFNlbmRUeXBlc1tTZW5kVHlwZXNbXCJCYXRjaFwiXSA9IDBdID0gXCJCYXRjaFwiO1xyXG4gICAgU2VuZFR5cGVzW1NlbmRUeXBlc1tcIkNvbm5lY3Rpb25DaGFuZ2VkXCJdID0gMV0gPSBcIkNvbm5lY3Rpb25DaGFuZ2VkXCI7XHJcbiAgICBTZW5kVHlwZXNbU2VuZFR5cGVzW1wiUGF1c2VVcGRhdGVcIl0gPSAyXSA9IFwiUGF1c2VVcGRhdGVcIjtcclxuICAgIFNlbmRUeXBlc1tTZW5kVHlwZXNbXCJOZXdcIl0gPSAzXSA9IFwiTmV3XCI7XHJcbn0pKFNlbmRUeXBlcyA9IGV4cG9ydHMuU2VuZFR5cGVzIHx8IChleHBvcnRzLlNlbmRUeXBlcyA9IHt9KSk7XHJcbnZhciBSZWNlaXZlVHlwZXM7XHJcbihmdW5jdGlvbiAoUmVjZWl2ZVR5cGVzKSB7XHJcbiAgICBSZWNlaXZlVHlwZXNbUmVjZWl2ZVR5cGVzW1wiRGlzY2FyZFwiXSA9IDBdID0gXCJEaXNjYXJkXCI7XHJcbiAgICBSZWNlaXZlVHlwZXNbUmVjZWl2ZVR5cGVzW1wiUGF1c2VcIl0gPSAxXSA9IFwiUGF1c2VcIjtcclxuICAgIFJlY2VpdmVUeXBlc1tSZWNlaXZlVHlwZXNbXCJTYXZlXCJdID0gMl0gPSBcIlNhdmVcIjtcclxuICAgIFJlY2VpdmVUeXBlc1tSZWNlaXZlVHlwZXNbXCJSZWNvbm5lY3RcIl0gPSAzXSA9IFwiUmVjb25uZWN0XCI7XHJcbiAgICBSZWNlaXZlVHlwZXNbUmVjZWl2ZVR5cGVzW1wiQ2hhbmdlTnVtYmVyXCJdID0gNF0gPSBcIkNoYW5nZU51bWJlclwiO1xyXG59KShSZWNlaXZlVHlwZXMgPSBleHBvcnRzLlJlY2VpdmVUeXBlcyB8fCAoZXhwb3J0cy5SZWNlaXZlVHlwZXMgPSB7fSkpO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbnRlcmZhY2VzLmpzLm1hcCIsIid1c2Ugc3RyaWN0JztcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgTWVzc2FnZVR5cGU7XHJcbihmdW5jdGlvbiAoTWVzc2FnZVR5cGUpIHtcclxuICAgIE1lc3NhZ2VUeXBlW01lc3NhZ2VUeXBlW1wiRXJyb3JcIl0gPSAwXSA9IFwiRXJyb3JcIjtcclxuICAgIE1lc3NhZ2VUeXBlW01lc3NhZ2VUeXBlW1wiV2FybmluZ1wiXSA9IDFdID0gXCJXYXJuaW5nXCI7XHJcbiAgICBNZXNzYWdlVHlwZVtNZXNzYWdlVHlwZVtcIlByaW50XCJdID0gMl0gPSBcIlByaW50XCI7XHJcbn0pKE1lc3NhZ2VUeXBlID0gZXhwb3J0cy5NZXNzYWdlVHlwZSB8fCAoZXhwb3J0cy5NZXNzYWdlVHlwZSA9IHt9KSk7XHJcbmNsYXNzIFByaW50TWVzc2FnZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihkYXRhKSB7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlVHlwZSA9IE1lc3NhZ2VUeXBlLlByaW50O1xyXG4gICAgICAgIGxldCBjb3VudCA9IDA7XHJcbiAgICAgICAgdGhpcy50aW1lc3RhbXAgPSBkYXRhLnJlYWRGbG9hdEJFKGNvdW50KTtcclxuICAgICAgICBjb3VudCArPSA0O1xyXG4gICAgICAgIHRoaXMuc2VxTnVtYmVyID0gZGF0YS5yZWFkSW50MTZCRShjb3VudCk7XHJcbiAgICAgICAgY291bnQgKz0gMjtcclxuICAgICAgICBjb25zdCBzbGljZSA9IGRhdGEuc2xpY2UoY291bnQpO1xyXG4gICAgICAgIHRoaXMubGluZSA9IHNsaWNlLnRvU3RyaW5nKCd1dGY4Jyk7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5QcmludE1lc3NhZ2UgPSBQcmludE1lc3NhZ2U7XHJcbmNsYXNzIEVycm9yTWVzc2FnZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihkYXRhKSB7XHJcbiAgICAgICAgbGV0IGNvdW50ID0gMDtcclxuICAgICAgICB0aGlzLnRpbWVzdGFtcCA9IGRhdGEucmVhZEZsb2F0QkUoY291bnQpO1xyXG4gICAgICAgIGNvdW50ICs9IDQ7XHJcbiAgICAgICAgdGhpcy5zZXFOdW1iZXIgPSBkYXRhLnJlYWRJbnQxNkJFKGNvdW50KTtcclxuICAgICAgICBjb3VudCArPSAyO1xyXG4gICAgICAgIHRoaXMubnVtT2NjdXIgPSBkYXRhLnJlYWRJbnQxNkJFKGNvdW50KTtcclxuICAgICAgICBjb3VudCArPSAyO1xyXG4gICAgICAgIHRoaXMuZXJyb3JDb2RlID0gZGF0YS5yZWFkSW50MzJCRShjb3VudCk7XHJcbiAgICAgICAgY291bnQgKz0gNDtcclxuICAgICAgICB0aGlzLmZsYWdzID0gZGF0YS5yZWFkVUludDgoY291bnQpO1xyXG4gICAgICAgIGNvdW50ICs9IDE7XHJcbiAgICAgICAgbGV0IHRtcCA9IHRoaXMuZ2V0U2l6ZWRTdHJpbmcoZGF0YSwgY291bnQpO1xyXG4gICAgICAgIHRoaXMuZGV0YWlscyA9IHRtcC5kYXRhO1xyXG4gICAgICAgIGNvdW50ICs9IHRtcC5ieXRlTGVuZ3RoO1xyXG4gICAgICAgIHRtcCA9IHRoaXMuZ2V0U2l6ZWRTdHJpbmcoZGF0YSwgY291bnQpO1xyXG4gICAgICAgIHRoaXMubG9jYXRpb24gPSB0bXAuZGF0YTtcclxuICAgICAgICBjb3VudCArPSB0bXAuYnl0ZUxlbmd0aDtcclxuICAgICAgICB0bXAgPSB0aGlzLmdldFNpemVkU3RyaW5nKGRhdGEsIGNvdW50KTtcclxuICAgICAgICB0aGlzLmNhbGxTdGFjayA9IHRtcC5kYXRhO1xyXG4gICAgICAgIGNvdW50ICs9IHRtcC5ieXRlTGVuZ3RoO1xyXG4gICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1iaXR3aXNlXHJcbiAgICAgICAgdGhpcy5tZXNzYWdlVHlwZSA9ICh0aGlzLmZsYWdzICYgMSkgIT09IDAgPyBNZXNzYWdlVHlwZS5FcnJvciA6IE1lc3NhZ2VUeXBlLldhcm5pbmc7XHJcbiAgICB9XHJcbiAgICBnZXRTaXplZFN0cmluZyhkYXRhLCBzdGFydCkge1xyXG4gICAgICAgIGNvbnN0IHNpemUgPSBkYXRhLnJlYWRVSW50MTZCRShzdGFydCk7XHJcbiAgICAgICAgc3RhcnQgKz0gMjtcclxuICAgICAgICBjb25zdCBjb3VudCA9IHNpemUgKyAyO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGJ5dGVMZW5ndGg6IGNvdW50LFxyXG4gICAgICAgICAgICBkYXRhOiBkYXRhLnRvU3RyaW5nKCd1dGY4Jywgc3RhcnQsIHN0YXJ0ICsgY291bnQgLSAyKSxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuRXJyb3JNZXNzYWdlID0gRXJyb3JNZXNzYWdlO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1tZXNzYWdlLmpzLm1hcCIsIid1c2Ugc3RyaWN0JztcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5jb25zdCBuZXQgPSByZXF1aXJlKFwibmV0XCIpO1xyXG5jb25zdCB0aW1lcnMgPSByZXF1aXJlKFwidGltZXJzXCIpO1xyXG5hc3luYyBmdW5jdGlvbiBwcm9wZXJSYWNlKHByb21pc2VzKSB7XHJcbiAgICBpZiAocHJvbWlzZXMubGVuZ3RoIDwgMSkge1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgnQ2FuXFwndCBzdGFydCBhIHJhY2Ugd2l0aG91dCBwcm9taXNlcyEnKTtcclxuICAgIH1cclxuICAgIC8vIFRoZXJlIGlzIG5vIHdheSB0byBrbm93IHdoaWNoIHByb21pc2UgaXMgcmVqZWN0ZWQuXHJcbiAgICAvLyBTbyB3ZSBtYXAgaXQgdG8gYSBuZXcgcHJvbWlzZSB0byByZXR1cm4gdGhlIGluZGV4IHdoZW4gaXQgZmFpbHNcclxuICAgIGNvbnN0IGluZGV4UHJvbWlzZXMgPSBwcm9taXNlcy5tYXAoKHAsIGluZGV4KSA9PiBwLmNhdGNoKCgpID0+IHsgdGhyb3cgaW5kZXg7IH0pKTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IFByb21pc2UucmFjZShpbmRleFByb21pc2VzKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChpbmRleCkge1xyXG4gICAgICAgIC8vIFRoZSBwcm9taXNlIGhhcyByZWplY3RlZCwgcmVtb3ZlIGl0IGZyb20gdGhlIGxpc3Qgb2YgcHJvbWlzZXMgYW5kIGp1c3QgY29udGludWUgdGhlIHJhY2UuXHJcbiAgICAgICAgY29uc29sZS5sb2coJ3JlamVjdCBwcm9taXNlJyk7XHJcbiAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLXVuc2FmZS1hbnlcclxuICAgICAgICBjb25zdCBwID0gcHJvbWlzZXMuc3BsaWNlKGluZGV4LCAxKVswXTtcclxuICAgICAgICBwLmNhdGNoKChlKSA9PiBjb25zb2xlLmxvZygnQSBwcm9taXNlIGhhcyBiZWVuIHJlamVjdGVkLCBidXQgYXdhaXRpbmcgb3RoZXJzJywgZSkpO1xyXG4gICAgICAgIHJldHVybiBwcm9wZXJSYWNlKHByb21pc2VzKTtcclxuICAgIH1cclxufVxyXG5jb25zdCBjb25zdGFudElwcyA9IFtcclxuICAgICcxNzIuMjIuMTEuMicsXHJcbiAgICAnMTI3LjAuMC4xJyxcclxuXTtcclxuY29uc3QgdGVhbUlwcyA9IFtcclxuICAgICdyb2JvUklPLVRFQU0tRlJDLmxvY2FsJyxcclxuICAgICdyb2JvUklPLVRFQU0tRlJDLmxhbicsXHJcbiAgICAncm9ib1JJTy1URUFNLUZSQy5mcmMtZmllbGQubG9jYWwnLFxyXG5dO1xyXG5mdW5jdGlvbiB0aW1lclByb21pc2UobXMpIHtcclxuICAgIGxldCB0aW1lcjtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgcHJvbWlzZTogbmV3IFByb21pc2UoKHJlc29sdmUsIF8pID0+IHtcclxuICAgICAgICAgICAgdGltZXIgPSB0aW1lcnMuc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKHVuZGVmaW5lZCk7XHJcbiAgICAgICAgICAgIH0sIG1zKTtcclxuICAgICAgICB9KSxcclxuICAgICAgICBjYW5jZWwoKSB7XHJcbiAgICAgICAgICAgIGlmICh0aW1lciA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2NhbmNlbGxlZCB0aW1lcicpO1xyXG4gICAgICAgICAgICB0aW1lcnMuY2xlYXJUaW1lb3V0KHRpbWVyKTtcclxuICAgICAgICB9LFxyXG4gICAgfTtcclxufVxyXG5jbGFzcyBEU1NvY2tldFByb21pc2VQYWlyIHtcclxuICAgIGNvbnN0cnVjdG9yKHJzLCBkcywgcCkge1xyXG4gICAgICAgIHRoaXMuc29ja2V0ID0gcnM7XHJcbiAgICAgICAgdGhpcy5wcm9taXNlID0gcDtcclxuICAgICAgICB0aGlzLmRzU29ja2V0ID0gZHM7XHJcbiAgICB9XHJcbiAgICBkaXNwb3NlKCkge1xyXG4gICAgICAgIHRoaXMuc29ja2V0LmVtaXQoJ2Rpc3Bvc2UnKTtcclxuICAgICAgICB0aGlzLmRzU29ja2V0LmVtaXQoJ2Rpc3Bvc2UnKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBnZXRTb2NrZXRGcm9tRFMocG9ydCkge1xyXG4gICAgY29uc3QgcyA9IG5ldyBuZXQuU29ja2V0KCk7XHJcbiAgICBjb25zdCBkcyA9IG5ldyBuZXQuU29ja2V0KCk7XHJcbiAgICBjb25zdCByZXRWYWwgPSBuZXcgRFNTb2NrZXRQcm9taXNlUGFpcihzLCBkcywgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIC8vIEZpcnN0IGNvbm5lY3QgdG8gZHMsIGFuZCB3YWl0IGZvciBkYXRhXHJcbiAgICAgICAgZHMub24oJ2RhdGEnLCAoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKGRhdGEudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIGlmIChwYXJzZWQucm9ib3RJUCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgZHMuZW5kKCk7XHJcbiAgICAgICAgICAgICAgICBkcy5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgICAgICBkcy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcclxuICAgICAgICAgICAgICAgIHJlamVjdCgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxldCBpcEFkZHIgPSAnJztcclxuICAgICAgICAgICAgY29uc3QgaXAgPSBwYXJzZWQucm9ib3RJUDtcclxuICAgICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWJpdHdpc2VcclxuICAgICAgICAgICAgaXBBZGRyICs9ICgoaXAgPj4gMjQpICYgMHhmZikgKyAnLic7XHJcbiAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1iaXR3aXNlXHJcbiAgICAgICAgICAgIGlwQWRkciArPSAoKGlwID4+IDE2KSAmIDB4ZmYpICsgJy4nO1xyXG4gICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tYml0d2lzZVxyXG4gICAgICAgICAgICBpcEFkZHIgKz0gKChpcCA+PiA4KSAmIDB4ZmYpICsgJy4nO1xyXG4gICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tYml0d2lzZVxyXG4gICAgICAgICAgICBpcEFkZHIgKz0gKGlwICYgMHhmZik7XHJcbiAgICAgICAgICAgIHMub24oJ2Vycm9yJywgKF8pID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdmYWlsZWQgY29ubmVjdGlvbiB0byAnICsgaXAgKyAnIGF0ICcgKyBwb3J0KTtcclxuICAgICAgICAgICAgICAgIHMuZW5kKCk7XHJcbiAgICAgICAgICAgICAgICBzLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgICAgIHMucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHMub24oJ3RpbWVvdXQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZmFpbGVkIGNvbm5lY3Rpb24gdG8gJyArIGlwICsgJyBhdCAnICsgcG9ydCk7XHJcbiAgICAgICAgICAgICAgICBzLmVuZCgpO1xyXG4gICAgICAgICAgICAgICAgcy5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgICAgICBzLnJlbW92ZUFsbExpc3RlbmVycygpO1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBzLm9uKCdjbG9zZScsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdmYWlsZWQgY29ubmVjdGlvbiB0byAnICsgaXAgKyAnIGF0ICcgKyBwb3J0KTtcclxuICAgICAgICAgICAgICAgIHMuZW5kKCk7XHJcbiAgICAgICAgICAgICAgICBzLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgICAgIHMucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHMub24oJ2Rpc3Bvc2UnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZGlzcG9zZWQgZHMgY29ubmVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoKTtcclxuICAgICAgICAgICAgICAgIHMuZW5kKCk7XHJcbiAgICAgICAgICAgICAgICBzLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgICAgIHMucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBzLmNvbm5lY3QocG9ydCwgaXBBZGRyLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBzLnJlbW92ZUFsbExpc3RlbmVycygpO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShzKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGRzLmVuZCgpO1xyXG4gICAgICAgICAgICBkcy5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgIGRzLnJlbW92ZUFsbExpc3RlbmVycygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGRzLm9uKCdlcnJvcicsICgpID0+IHtcclxuICAgICAgICAgICAgcmVqZWN0KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZHMub24oJ2Rpc3Bvc2UnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdkaXNwb3NlZCBkcycpO1xyXG4gICAgICAgICAgICByZWplY3QoKTtcclxuICAgICAgICAgICAgZHMuZW5kKCk7XHJcbiAgICAgICAgICAgIGRzLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgZHMucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZHMuY29ubmVjdCgxNzQyLCAnMTI3LjAuMC4xJyk7XHJcbiAgICB9KSk7XHJcbiAgICByZXR1cm4gcmV0VmFsO1xyXG59XHJcbmNsYXNzIFJhd1NvY2tldFByb21pc2VQYWlyIHtcclxuICAgIGNvbnN0cnVjdG9yKHJzLCBwKSB7XHJcbiAgICAgICAgdGhpcy5zb2NrZXQgPSBycztcclxuICAgICAgICB0aGlzLnByb21pc2UgPSBwO1xyXG4gICAgfVxyXG4gICAgZGlzcG9zZSgpIHtcclxuICAgICAgICB0aGlzLnNvY2tldC5lbWl0KCdkaXNwb3NlJyk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gZ2V0U29ja2V0RnJvbUlQKHBvcnQsIGlwKSB7XHJcbiAgICBjb25zdCBzID0gbmV3IG5ldC5Tb2NrZXQoKTtcclxuICAgIHJldHVybiBuZXcgUmF3U29ja2V0UHJvbWlzZVBhaXIocywgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIHMub24oJ2Vycm9yJywgKF8pID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2ZhaWxlZCBjb25uZWN0aW9uIHRvICcgKyBpcCArICcgYXQgJyArIHBvcnQpO1xyXG4gICAgICAgICAgICBzLmVuZCgpO1xyXG4gICAgICAgICAgICBzLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgcy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcclxuICAgICAgICAgICAgcmVqZWN0KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcy5vbigndGltZW91dCcsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2ZhaWxlZCBjb25uZWN0aW9uIHRvICcgKyBpcCArICcgYXQgJyArIHBvcnQpO1xyXG4gICAgICAgICAgICBzLmVuZCgpO1xyXG4gICAgICAgICAgICBzLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgcy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcclxuICAgICAgICAgICAgcmVqZWN0KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcy5vbignY2xvc2UnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHMuZW5kKCk7XHJcbiAgICAgICAgICAgIHMuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICBzLnJlbW92ZUFsbExpc3RlbmVycygpO1xyXG4gICAgICAgICAgICByZWplY3QoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBzLm9uKCdkaXNwb3NlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnZGlzcG9zZWQnLCBpcCk7XHJcbiAgICAgICAgICAgIHJlamVjdCgpO1xyXG4gICAgICAgICAgICBzLmVuZCgpO1xyXG4gICAgICAgICAgICBzLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgcy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBzLmNvbm5lY3QocG9ydCwgaXAsICgpID0+IHtcclxuICAgICAgICAgICAgcy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcclxuICAgICAgICAgICAgcmVzb2x2ZShzKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBjb25uZWN0VG9Sb2JvdChwb3J0LCB0ZWFtTnVtYmVyLCB0aW1lb3V0KSB7XHJcbiAgICBjb25zdCBwYWlycyA9IFtdO1xyXG4gICAgdGVhbU51bWJlciA9IE1hdGgudHJ1bmModGVhbU51bWJlcik7XHJcbiAgICBmb3IgKGNvbnN0IGMgb2YgY29uc3RhbnRJcHMpIHtcclxuICAgICAgICBwYWlycy5wdXNoKGdldFNvY2tldEZyb21JUChwb3J0LCBjKSk7XHJcbiAgICB9XHJcbiAgICBmb3IgKGNvbnN0IGMgb2YgdGVhbUlwcykge1xyXG4gICAgICAgIHBhaXJzLnB1c2goZ2V0U29ja2V0RnJvbUlQKHBvcnQsIGMucmVwbGFjZSgnVEVBTScsIHRlYW1OdW1iZXIudG9TdHJpbmcoKSkpKTtcclxuICAgIH1cclxuICAgIHBhaXJzLnB1c2goZ2V0U29ja2V0RnJvbUlQKHBvcnQsIGAxMC4ke01hdGgudHJ1bmModGVhbU51bWJlciAvIDEwMCl9LiR7dGVhbU51bWJlciAlIDEwMH0uMmApKTtcclxuICAgIHBhaXJzLnB1c2goZ2V0U29ja2V0RnJvbURTKHBvcnQpKTtcclxuICAgIGNvbnN0IGNvbm5lY3RvcnMgPSBbXTtcclxuICAgIGZvciAoY29uc3QgcCBvZiBwYWlycykge1xyXG4gICAgICAgIGNvbm5lY3RvcnMucHVzaChwLnByb21pc2UpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgdGltZXIgPSB0aW1lclByb21pc2UodGltZW91dCk7XHJcbiAgICBjb25uZWN0b3JzLnB1c2godGltZXIucHJvbWlzZSk7XHJcbiAgICBjb25zdCBmaXJzdERvbmUgPSBhd2FpdCBwcm9wZXJSYWNlKGNvbm5lY3RvcnMpO1xyXG4gICAgaWYgKGZpcnN0RG9uZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgLy8gS2lsbCBhbGxcclxuICAgICAgICBmb3IgKGNvbnN0IHAgb2YgcGFpcnMpIHtcclxuICAgICAgICAgICAgcC5kaXNwb3NlKCk7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBwLnByb21pc2U7XHJcbiAgICAgICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tZW1wdHlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoX2EpIHtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIC8vIEtpbGwgYWxsIGJ1dCBtZVxyXG4gICAgICAgIHRpbWVyLmNhbmNlbCgpO1xyXG4gICAgICAgIGZvciAoY29uc3QgcCBvZiBwYWlycykge1xyXG4gICAgICAgICAgICBpZiAoZmlyc3REb25lICE9PSBwLnNvY2tldCkge1xyXG4gICAgICAgICAgICAgICAgcC5kaXNwb3NlKCk7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHAucHJvbWlzZTtcclxuICAgICAgICAgICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tZW1wdHlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChfYikge1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZpcnN0RG9uZTtcclxufVxyXG5leHBvcnRzLmNvbm5lY3RUb1JvYm90ID0gY29ubmVjdFRvUm9ib3Q7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJpb2Nvbm5lY3Rvci5qcy5tYXAiLCJ2YXIgZztcblxuLy8gVGhpcyB3b3JrcyBpbiBub24tc3RyaWN0IG1vZGVcbmcgPSAoZnVuY3Rpb24oKSB7XG5cdHJldHVybiB0aGlzO1xufSkoKTtcblxudHJ5IHtcblx0Ly8gVGhpcyB3b3JrcyBpZiBldmFsIGlzIGFsbG93ZWQgKHNlZSBDU1ApXG5cdGcgPSBnIHx8IEZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKSB8fCAoMSwgZXZhbCkoXCJ0aGlzXCIpO1xufSBjYXRjaCAoZSkge1xuXHQvLyBUaGlzIHdvcmtzIGlmIHRoZSB3aW5kb3cgcmVmZXJlbmNlIGlzIGF2YWlsYWJsZVxuXHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJvYmplY3RcIikgZyA9IHdpbmRvdztcbn1cblxuLy8gZyBjYW4gc3RpbGwgYmUgdW5kZWZpbmVkLCBidXQgbm90aGluZyB0byBkbyBhYm91dCBpdC4uLlxuLy8gV2UgcmV0dXJuIHVuZGVmaW5lZCwgaW5zdGVhZCBvZiBub3RoaW5nIGhlcmUsIHNvIGl0J3Ncbi8vIGVhc2llciB0byBoYW5kbGUgdGhpcyBjYXNlLiBpZighZ2xvYmFsKSB7IC4uLn1cblxubW9kdWxlLmV4cG9ydHMgPSBnO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbmZ1bmN0aW9uIF9fZXhwb3J0KG0pIHtcclxuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcclxufVxyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbl9fZXhwb3J0KHJlcXVpcmUoXCIuL2ludGVyZmFjZXNcIikpO1xyXG5fX2V4cG9ydChyZXF1aXJlKFwiLi9tZXNzYWdlXCIpKTtcclxuX19leHBvcnQocmVxdWlyZShcIi4vcmlvY29ubmVjdG9yXCIpKTtcclxuX19leHBvcnQocmVxdWlyZShcIi4vcmlvY29uc29sZVwiKSk7XHJcbl9fZXhwb3J0KHJlcXVpcmUoXCIuL3Jpb2xvZ3dpbmRvd1wiKSk7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCIsInZhciBzY29wZSA9ICh0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiICYmIGdsb2JhbCkgfHxcbiAgICAgICAgICAgICh0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiAmJiBzZWxmKSB8fFxuICAgICAgICAgICAgd2luZG93O1xudmFyIGFwcGx5ID0gRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5O1xuXG4vLyBET00gQVBJcywgZm9yIGNvbXBsZXRlbmVzc1xuXG5leHBvcnRzLnNldFRpbWVvdXQgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIG5ldyBUaW1lb3V0KGFwcGx5LmNhbGwoc2V0VGltZW91dCwgc2NvcGUsIGFyZ3VtZW50cyksIGNsZWFyVGltZW91dCk7XG59O1xuZXhwb3J0cy5zZXRJbnRlcnZhbCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFRpbWVvdXQoYXBwbHkuY2FsbChzZXRJbnRlcnZhbCwgc2NvcGUsIGFyZ3VtZW50cyksIGNsZWFySW50ZXJ2YWwpO1xufTtcbmV4cG9ydHMuY2xlYXJUaW1lb3V0ID1cbmV4cG9ydHMuY2xlYXJJbnRlcnZhbCA9IGZ1bmN0aW9uKHRpbWVvdXQpIHtcbiAgaWYgKHRpbWVvdXQpIHtcbiAgICB0aW1lb3V0LmNsb3NlKCk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIFRpbWVvdXQoaWQsIGNsZWFyRm4pIHtcbiAgdGhpcy5faWQgPSBpZDtcbiAgdGhpcy5fY2xlYXJGbiA9IGNsZWFyRm47XG59XG5UaW1lb3V0LnByb3RvdHlwZS51bnJlZiA9IFRpbWVvdXQucHJvdG90eXBlLnJlZiA9IGZ1bmN0aW9uKCkge307XG5UaW1lb3V0LnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLl9jbGVhckZuLmNhbGwoc2NvcGUsIHRoaXMuX2lkKTtcbn07XG5cbi8vIERvZXMgbm90IHN0YXJ0IHRoZSB0aW1lLCBqdXN0IHNldHMgdXAgdGhlIG1lbWJlcnMgbmVlZGVkLlxuZXhwb3J0cy5lbnJvbGwgPSBmdW5jdGlvbihpdGVtLCBtc2Vjcykge1xuICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG4gIGl0ZW0uX2lkbGVUaW1lb3V0ID0gbXNlY3M7XG59O1xuXG5leHBvcnRzLnVuZW5yb2xsID0gZnVuY3Rpb24oaXRlbSkge1xuICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG4gIGl0ZW0uX2lkbGVUaW1lb3V0ID0gLTE7XG59O1xuXG5leHBvcnRzLl91bnJlZkFjdGl2ZSA9IGV4cG9ydHMuYWN0aXZlID0gZnVuY3Rpb24oaXRlbSkge1xuICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG5cbiAgdmFyIG1zZWNzID0gaXRlbS5faWRsZVRpbWVvdXQ7XG4gIGlmIChtc2VjcyA+PSAwKSB7XG4gICAgaXRlbS5faWRsZVRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gb25UaW1lb3V0KCkge1xuICAgICAgaWYgKGl0ZW0uX29uVGltZW91dClcbiAgICAgICAgaXRlbS5fb25UaW1lb3V0KCk7XG4gICAgfSwgbXNlY3MpO1xuICB9XG59O1xuXG4vLyBzZXRpbW1lZGlhdGUgYXR0YWNoZXMgaXRzZWxmIHRvIHRoZSBnbG9iYWwgb2JqZWN0XG5yZXF1aXJlKFwic2V0aW1tZWRpYXRlXCIpO1xuLy8gT24gc29tZSBleG90aWMgZW52aXJvbm1lbnRzLCBpdCdzIG5vdCBjbGVhciB3aGljaCBvYmplY3QgYHNldGltbWVkaWF0ZWAgd2FzXG4vLyBhYmxlIHRvIGluc3RhbGwgb250by4gIFNlYXJjaCBlYWNoIHBvc3NpYmlsaXR5IGluIHRoZSBzYW1lIG9yZGVyIGFzIHRoZVxuLy8gYHNldGltbWVkaWF0ZWAgbGlicmFyeS5cbmV4cG9ydHMuc2V0SW1tZWRpYXRlID0gKHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiICYmIHNlbGYuc2V0SW1tZWRpYXRlKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAodHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBnbG9iYWwuc2V0SW1tZWRpYXRlKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAodGhpcyAmJiB0aGlzLnNldEltbWVkaWF0ZSk7XG5leHBvcnRzLmNsZWFySW1tZWRpYXRlID0gKHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiICYmIHNlbGYuY2xlYXJJbW1lZGlhdGUpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgKHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgJiYgZ2xvYmFsLmNsZWFySW1tZWRpYXRlKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzICYmIHRoaXMuY2xlYXJJbW1lZGlhdGUpO1xuIiwiKGZ1bmN0aW9uIChnbG9iYWwsIHVuZGVmaW5lZCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgaWYgKGdsb2JhbC5zZXRJbW1lZGlhdGUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBuZXh0SGFuZGxlID0gMTsgLy8gU3BlYyBzYXlzIGdyZWF0ZXIgdGhhbiB6ZXJvXG4gICAgdmFyIHRhc2tzQnlIYW5kbGUgPSB7fTtcbiAgICB2YXIgY3VycmVudGx5UnVubmluZ0FUYXNrID0gZmFsc2U7XG4gICAgdmFyIGRvYyA9IGdsb2JhbC5kb2N1bWVudDtcbiAgICB2YXIgcmVnaXN0ZXJJbW1lZGlhdGU7XG5cbiAgICBmdW5jdGlvbiBzZXRJbW1lZGlhdGUoY2FsbGJhY2spIHtcbiAgICAgIC8vIENhbGxiYWNrIGNhbiBlaXRoZXIgYmUgYSBmdW5jdGlvbiBvciBhIHN0cmluZ1xuICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIGNhbGxiYWNrID0gbmV3IEZ1bmN0aW9uKFwiXCIgKyBjYWxsYmFjayk7XG4gICAgICB9XG4gICAgICAvLyBDb3B5IGZ1bmN0aW9uIGFyZ3VtZW50c1xuICAgICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgYXJnc1tpXSA9IGFyZ3VtZW50c1tpICsgMV07XG4gICAgICB9XG4gICAgICAvLyBTdG9yZSBhbmQgcmVnaXN0ZXIgdGhlIHRhc2tcbiAgICAgIHZhciB0YXNrID0geyBjYWxsYmFjazogY2FsbGJhY2ssIGFyZ3M6IGFyZ3MgfTtcbiAgICAgIHRhc2tzQnlIYW5kbGVbbmV4dEhhbmRsZV0gPSB0YXNrO1xuICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUobmV4dEhhbmRsZSk7XG4gICAgICByZXR1cm4gbmV4dEhhbmRsZSsrO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsZWFySW1tZWRpYXRlKGhhbmRsZSkge1xuICAgICAgICBkZWxldGUgdGFza3NCeUhhbmRsZVtoYW5kbGVdO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJ1bih0YXNrKSB7XG4gICAgICAgIHZhciBjYWxsYmFjayA9IHRhc2suY2FsbGJhY2s7XG4gICAgICAgIHZhciBhcmdzID0gdGFzay5hcmdzO1xuICAgICAgICBzd2l0Y2ggKGFyZ3MubGVuZ3RoKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgY2FsbGJhY2soYXJnc1swXSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgY2FsbGJhY2soYXJnc1swXSwgYXJnc1sxXSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgY2FsbGJhY2soYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KHVuZGVmaW5lZCwgYXJncyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJ1bklmUHJlc2VudChoYW5kbGUpIHtcbiAgICAgICAgLy8gRnJvbSB0aGUgc3BlYzogXCJXYWl0IHVudGlsIGFueSBpbnZvY2F0aW9ucyBvZiB0aGlzIGFsZ29yaXRobSBzdGFydGVkIGJlZm9yZSB0aGlzIG9uZSBoYXZlIGNvbXBsZXRlZC5cIlxuICAgICAgICAvLyBTbyBpZiB3ZSdyZSBjdXJyZW50bHkgcnVubmluZyBhIHRhc2ssIHdlJ2xsIG5lZWQgdG8gZGVsYXkgdGhpcyBpbnZvY2F0aW9uLlxuICAgICAgICBpZiAoY3VycmVudGx5UnVubmluZ0FUYXNrKSB7XG4gICAgICAgICAgICAvLyBEZWxheSBieSBkb2luZyBhIHNldFRpbWVvdXQuIHNldEltbWVkaWF0ZSB3YXMgdHJpZWQgaW5zdGVhZCwgYnV0IGluIEZpcmVmb3ggNyBpdCBnZW5lcmF0ZWQgYVxuICAgICAgICAgICAgLy8gXCJ0b28gbXVjaCByZWN1cnNpb25cIiBlcnJvci5cbiAgICAgICAgICAgIHNldFRpbWVvdXQocnVuSWZQcmVzZW50LCAwLCBoYW5kbGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIHRhc2sgPSB0YXNrc0J5SGFuZGxlW2hhbmRsZV07XG4gICAgICAgICAgICBpZiAodGFzaykge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IHRydWU7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgcnVuKHRhc2spO1xuICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFySW1tZWRpYXRlKGhhbmRsZSk7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxOZXh0VGlja0ltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbiAoKSB7IHJ1bklmUHJlc2VudChoYW5kbGUpOyB9KTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjYW5Vc2VQb3N0TWVzc2FnZSgpIHtcbiAgICAgICAgLy8gVGhlIHRlc3QgYWdhaW5zdCBgaW1wb3J0U2NyaXB0c2AgcHJldmVudHMgdGhpcyBpbXBsZW1lbnRhdGlvbiBmcm9tIGJlaW5nIGluc3RhbGxlZCBpbnNpZGUgYSB3ZWIgd29ya2VyLFxuICAgICAgICAvLyB3aGVyZSBgZ2xvYmFsLnBvc3RNZXNzYWdlYCBtZWFucyBzb21ldGhpbmcgY29tcGxldGVseSBkaWZmZXJlbnQgYW5kIGNhbid0IGJlIHVzZWQgZm9yIHRoaXMgcHVycG9zZS5cbiAgICAgICAgaWYgKGdsb2JhbC5wb3N0TWVzc2FnZSAmJiAhZ2xvYmFsLmltcG9ydFNjcmlwdHMpIHtcbiAgICAgICAgICAgIHZhciBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciBvbGRPbk1lc3NhZ2UgPSBnbG9iYWwub25tZXNzYWdlO1xuICAgICAgICAgICAgZ2xvYmFsLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXMgPSBmYWxzZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBnbG9iYWwucG9zdE1lc3NhZ2UoXCJcIiwgXCIqXCIpO1xuICAgICAgICAgICAgZ2xvYmFsLm9ubWVzc2FnZSA9IG9sZE9uTWVzc2FnZTtcbiAgICAgICAgICAgIHJldHVybiBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbFBvc3RNZXNzYWdlSW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIC8vIEluc3RhbGxzIGFuIGV2ZW50IGhhbmRsZXIgb24gYGdsb2JhbGAgZm9yIHRoZSBgbWVzc2FnZWAgZXZlbnQ6IHNlZVxuICAgICAgICAvLyAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL0RPTS93aW5kb3cucG9zdE1lc3NhZ2VcbiAgICAgICAgLy8gKiBodHRwOi8vd3d3LndoYXR3Zy5vcmcvc3BlY3Mvd2ViLWFwcHMvY3VycmVudC13b3JrL211bHRpcGFnZS9jb21tcy5odG1sI2Nyb3NzRG9jdW1lbnRNZXNzYWdlc1xuXG4gICAgICAgIHZhciBtZXNzYWdlUHJlZml4ID0gXCJzZXRJbW1lZGlhdGUkXCIgKyBNYXRoLnJhbmRvbSgpICsgXCIkXCI7XG4gICAgICAgIHZhciBvbkdsb2JhbE1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgaWYgKGV2ZW50LnNvdXJjZSA9PT0gZ2xvYmFsICYmXG4gICAgICAgICAgICAgICAgdHlwZW9mIGV2ZW50LmRhdGEgPT09IFwic3RyaW5nXCIgJiZcbiAgICAgICAgICAgICAgICBldmVudC5kYXRhLmluZGV4T2YobWVzc2FnZVByZWZpeCkgPT09IDApIHtcbiAgICAgICAgICAgICAgICBydW5JZlByZXNlbnQoK2V2ZW50LmRhdGEuc2xpY2UobWVzc2FnZVByZWZpeC5sZW5ndGgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICAgICAgICAgIGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBvbkdsb2JhbE1lc3NhZ2UsIGZhbHNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGdsb2JhbC5hdHRhY2hFdmVudChcIm9ubWVzc2FnZVwiLCBvbkdsb2JhbE1lc3NhZ2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIGdsb2JhbC5wb3N0TWVzc2FnZShtZXNzYWdlUHJlZml4ICsgaGFuZGxlLCBcIipcIik7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbE1lc3NhZ2VDaGFubmVsSW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIHZhciBjaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XG4gICAgICAgIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIHZhciBoYW5kbGUgPSBldmVudC5kYXRhO1xuICAgICAgICAgICAgcnVuSWZQcmVzZW50KGhhbmRsZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIGNoYW5uZWwucG9ydDIucG9zdE1lc3NhZ2UoaGFuZGxlKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsUmVhZHlTdGF0ZUNoYW5nZUltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICB2YXIgaHRtbCA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICAvLyBDcmVhdGUgYSA8c2NyaXB0PiBlbGVtZW50OyBpdHMgcmVhZHlzdGF0ZWNoYW5nZSBldmVudCB3aWxsIGJlIGZpcmVkIGFzeW5jaHJvbm91c2x5IG9uY2UgaXQgaXMgaW5zZXJ0ZWRcbiAgICAgICAgICAgIC8vIGludG8gdGhlIGRvY3VtZW50LiBEbyBzbywgdGh1cyBxdWV1aW5nIHVwIHRoZSB0YXNrLiBSZW1lbWJlciB0byBjbGVhbiB1cCBvbmNlIGl0J3MgYmVlbiBjYWxsZWQuXG4gICAgICAgICAgICB2YXIgc2NyaXB0ID0gZG9jLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7XG4gICAgICAgICAgICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJ1bklmUHJlc2VudChoYW5kbGUpO1xuICAgICAgICAgICAgICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBudWxsO1xuICAgICAgICAgICAgICAgIGh0bWwucmVtb3ZlQ2hpbGQoc2NyaXB0KTtcbiAgICAgICAgICAgICAgICBzY3JpcHQgPSBudWxsO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGh0bWwuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsU2V0VGltZW91dEltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgc2V0VGltZW91dChydW5JZlByZXNlbnQsIDAsIGhhbmRsZSk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gSWYgc3VwcG9ydGVkLCB3ZSBzaG91bGQgYXR0YWNoIHRvIHRoZSBwcm90b3R5cGUgb2YgZ2xvYmFsLCBzaW5jZSB0aGF0IGlzIHdoZXJlIHNldFRpbWVvdXQgZXQgYWwuIGxpdmUuXG4gICAgdmFyIGF0dGFjaFRvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mICYmIE9iamVjdC5nZXRQcm90b3R5cGVPZihnbG9iYWwpO1xuICAgIGF0dGFjaFRvID0gYXR0YWNoVG8gJiYgYXR0YWNoVG8uc2V0VGltZW91dCA/IGF0dGFjaFRvIDogZ2xvYmFsO1xuXG4gICAgLy8gRG9uJ3QgZ2V0IGZvb2xlZCBieSBlLmcuIGJyb3dzZXJpZnkgZW52aXJvbm1lbnRzLlxuICAgIGlmICh7fS50b1N0cmluZy5jYWxsKGdsb2JhbC5wcm9jZXNzKSA9PT0gXCJbb2JqZWN0IHByb2Nlc3NdXCIpIHtcbiAgICAgICAgLy8gRm9yIE5vZGUuanMgYmVmb3JlIDAuOVxuICAgICAgICBpbnN0YWxsTmV4dFRpY2tJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgfSBlbHNlIGlmIChjYW5Vc2VQb3N0TWVzc2FnZSgpKSB7XG4gICAgICAgIC8vIEZvciBub24tSUUxMCBtb2Rlcm4gYnJvd3NlcnNcbiAgICAgICAgaW5zdGFsbFBvc3RNZXNzYWdlSW1wbGVtZW50YXRpb24oKTtcblxuICAgIH0gZWxzZSBpZiAoZ2xvYmFsLk1lc3NhZ2VDaGFubmVsKSB7XG4gICAgICAgIC8vIEZvciB3ZWIgd29ya2Vycywgd2hlcmUgc3VwcG9ydGVkXG4gICAgICAgIGluc3RhbGxNZXNzYWdlQ2hhbm5lbEltcGxlbWVudGF0aW9uKCk7XG5cbiAgICB9IGVsc2UgaWYgKGRvYyAmJiBcIm9ucmVhZHlzdGF0ZWNoYW5nZVwiIGluIGRvYy5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpKSB7XG4gICAgICAgIC8vIEZvciBJRSA24oCTOFxuICAgICAgICBpbnN0YWxsUmVhZHlTdGF0ZUNoYW5nZUltcGxlbWVudGF0aW9uKCk7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBGb3Igb2xkZXIgYnJvd3NlcnNcbiAgICAgICAgaW5zdGFsbFNldFRpbWVvdXRJbXBsZW1lbnRhdGlvbigpO1xuICAgIH1cblxuICAgIGF0dGFjaFRvLnNldEltbWVkaWF0ZSA9IHNldEltbWVkaWF0ZTtcbiAgICBhdHRhY2hUby5jbGVhckltbWVkaWF0ZSA9IGNsZWFySW1tZWRpYXRlO1xufSh0eXBlb2Ygc2VsZiA9PT0gXCJ1bmRlZmluZWRcIiA/IHR5cGVvZiBnbG9iYWwgPT09IFwidW5kZWZpbmVkXCIgPyB0aGlzIDogZ2xvYmFsIDogc2VsZikpO1xuIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbi8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuLy8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXG4vLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG4vLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXG52YXIgY2FjaGVkU2V0VGltZW91dDtcbnZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cbmZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG5mdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0ICgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuKGZ1bmN0aW9uICgpIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIGNsZWFyVGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICB9XG59ICgpKVxuZnVuY3Rpb24gcnVuVGltZW91dChmdW4pIHtcbiAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZFNldFRpbWVvdXQgPT09IGRlZmF1bHRTZXRUaW1vdXQgfHwgIWNhY2hlZFNldFRpbWVvdXQpICYmIHNldFRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9IGNhdGNoKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0IHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7XG4gICAgICAgIH0gY2F0Y2goZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvclxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApO1xuICAgICAgICB9XG4gICAgfVxuXG5cbn1cbmZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcbiAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgLy8gaWYgY2xlYXJUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfSBjYXRjaCAoZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcbiAgICAgICAgfSBjYXRjaCAoZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci5cbiAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbCh0aGlzLCBtYXJrZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxufVxudmFyIHF1ZXVlID0gW107XG52YXIgZHJhaW5pbmcgPSBmYWxzZTtcbnZhciBjdXJyZW50UXVldWU7XG52YXIgcXVldWVJbmRleCA9IC0xO1xuXG5mdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG4gICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICB9XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBkcmFpblF1ZXVlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuICAgIGlmIChkcmFpbmluZykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuICAgIGRyYWluaW5nID0gdHJ1ZTtcblxuICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgd2hpbGUobGVuKSB7XG4gICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBxdWV1ZSA9IFtdO1xuICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIH1cbiAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xufVxuXG5wcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcbiAgICAgICAgcnVuVGltZW91dChkcmFpblF1ZXVlKTtcbiAgICB9XG59O1xuXG4vLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5mdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcbiAgICB0aGlzLmZ1biA9IGZ1bjtcbiAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG59XG5JdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG59O1xucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcbnByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5wcm9jZXNzLmVudiA9IHt9O1xucHJvY2Vzcy5hcmd2ID0gW107XG5wcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcbnByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnByb2Nlc3Mub24gPSBub29wO1xucHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLm9uY2UgPSBub29wO1xucHJvY2Vzcy5vZmYgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5wcm9jZXNzLmVtaXQgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kT25jZUxpc3RlbmVyID0gbm9vcDtcblxucHJvY2Vzcy5saXN0ZW5lcnMgPSBmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gW10gfVxuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5cbnByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5wcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xucHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcbiIsIid1c2Ugc3RyaWN0JztcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5jb25zdCBldmVudHNfMSA9IHJlcXVpcmUoXCJldmVudHNcIik7XHJcbmNvbnN0IG1lc3NhZ2VfMSA9IHJlcXVpcmUoXCIuL21lc3NhZ2VcIik7XHJcbmNvbnN0IHByb21pc2Vjb25kXzEgPSByZXF1aXJlKFwiLi9wcm9taXNlY29uZFwiKTtcclxuY29uc3QgcmlvY29ubmVjdG9yXzEgPSByZXF1aXJlKFwiLi9yaW9jb25uZWN0b3JcIik7XHJcbmNsYXNzIFJpb0NvbnNvbGUgZXh0ZW5kcyBldmVudHNfMS5FdmVudEVtaXR0ZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcclxuICAgICAgICB0aGlzLmRpc2NhcmQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmNvbm5lY3RlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuYXV0b1JlY29ubmVjdCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5jbGVhbnVwID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5jb25kaXRpb24gPSBuZXcgcHJvbWlzZWNvbmRfMS5Qcm9taXNlQ29uZGl0aW9uKCk7XHJcbiAgICAgICAgdGhpcy50ZWFtTnVtYmVyID0gMDtcclxuICAgIH1cclxuICAgIHN0b3AoKSB7XHJcbiAgICAgICAgdGhpcy5jbGVhbnVwID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmNsb3NlU29ja2V0KCk7XHJcbiAgICB9XHJcbiAgICBnZXRBdXRvUmVjb25uZWN0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmF1dG9SZWNvbm5lY3Q7XHJcbiAgICB9XHJcbiAgICBzZXRBdXRvUmVjb25uZWN0KHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5hdXRvUmVjb25uZWN0ID0gdmFsdWU7XHJcbiAgICAgICAgaWYgKHZhbHVlID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29uZGl0aW9uLnNldCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHN0YXJ0TGlzdGVuaW5nKCkge1xyXG4gICAgICAgIGNvbnN0IGFzeW5jRnVuY3Rpb24gPSBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIHdoaWxlICghdGhpcy5jbGVhbnVwKSB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAoIXRoaXMuYXV0b1JlY29ubmVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNsZWFudXApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmNvbmRpdGlvbi53YWl0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25kaXRpb24ucmVzZXQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucnVuRnVuY3Rpb24odGhpcy50ZWFtTnVtYmVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnZmluaXNoZWQgbG9vcCcpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5wcm9taXNlID0gYXN5bmNGdW5jdGlvbigpO1xyXG4gICAgfVxyXG4gICAgY2xvc2VTb2NrZXQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY2xvc2VGdW5jICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZUZ1bmMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBkaXNjb25uZWN0KCkge1xyXG4gICAgICAgIHRoaXMuY2xvc2VTb2NrZXQoKTtcclxuICAgIH1cclxuICAgIHNldFRlYW1OdW1iZXIodGVhbU51bWJlcikge1xyXG4gICAgICAgIHRoaXMudGVhbU51bWJlciA9IHRlYW1OdW1iZXI7XHJcbiAgICB9XHJcbiAgICBhc3luYyBkaXNwb3NlKCkge1xyXG4gICAgICAgIHRoaXMuc3RvcCgpO1xyXG4gICAgICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5wcm9taXNlO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgY29ubmVjdCh0ZWFtTnVtYmVyKSB7XHJcbiAgICAgICAgY29uc3Qgc29ja2V0ID0gYXdhaXQgcmlvY29ubmVjdG9yXzEuY29ubmVjdFRvUm9ib3QoMTc0MSwgdGVhbU51bWJlciwgMjAwMCk7XHJcbiAgICAgICAgaWYgKHNvY2tldCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNvY2tldC5zZXROb0RlbGF5KHRydWUpO1xyXG4gICAgICAgIHNvY2tldC5zZXRLZWVwQWxpdmUodHJ1ZSwgNTAwKTtcclxuICAgICAgICByZXR1cm4gc29ja2V0O1xyXG4gICAgfVxyXG4gICAgaGFuZGxlRGF0YShkYXRhKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGlzY2FyZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBjb3VudCA9IDA7XHJcbiAgICAgICAgbGV0IGxlbiA9IDA7XHJcbiAgICAgICAgZG8ge1xyXG4gICAgICAgICAgICBsZW4gPSBkYXRhLnJlYWRVSW50MTZCRShjb3VudCk7XHJcbiAgICAgICAgICAgIGNvdW50ICs9IDI7XHJcbiAgICAgICAgfSB3aGlsZSAobGVuID09PSAwKTtcclxuICAgICAgICBjb25zdCB0YWcgPSBkYXRhLnJlYWRVSW50OChjb3VudCk7XHJcbiAgICAgICAgY291bnQrKztcclxuICAgICAgICBjb25zdCBvdXRwdXRCdWZmZXIgPSBkYXRhLnNsaWNlKDMsIGxlbiArIDIpO1xyXG4gICAgICAgIGNvbnN0IGV4dGVuZGVkQnVmID0gZGF0YS5zbGljZSgyICsgbGVuKTtcclxuICAgICAgICBpZiAodGFnID09PSAxMSkge1xyXG4gICAgICAgICAgICAvLyBlcnJvciBvciB3YXJuaW5nLlxyXG4gICAgICAgICAgICBjb25zdCBtID0gbmV3IG1lc3NhZ2VfMS5FcnJvck1lc3NhZ2Uob3V0cHV0QnVmZmVyKTtcclxuICAgICAgICAgICAgdGhpcy5lbWl0KCdtZXNzYWdlJywgbSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRhZyA9PT0gMTIpIHtcclxuICAgICAgICAgICAgY29uc3QgbSA9IG5ldyBtZXNzYWdlXzEuUHJpbnRNZXNzYWdlKG91dHB1dEJ1ZmZlcik7XHJcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnbWVzc2FnZScsIG0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZXh0ZW5kZWRCdWYubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZURhdGEoZXh0ZW5kZWRCdWYpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGFzeW5jIHJ1bkZ1bmN0aW9uKHRlYW1OdW1iZXIpIHtcclxuICAgICAgICBjb25zdCBzb2NrZXQgPSBhd2FpdCB0aGlzLmNvbm5lY3QodGVhbU51bWJlcik7XHJcbiAgICAgICAgaWYgKHNvY2tldCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdiYWQgc29ja2V0Jyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb25uZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuZW1pdCgnY29ubmVjdGlvbkNoYW5nZWQnLCB0cnVlKTtcclxuICAgICAgICBjb25zb2xlLmxvZygnc3VjY2VzZnVsbHkgY29ubmVjdGVkJyk7XHJcbiAgICAgICAgc29ja2V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVEYXRhKGRhdGEpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmICh0aGlzLmNsZWFudXApIHtcclxuICAgICAgICAgICAgc29ja2V0LmVuZCgpO1xyXG4gICAgICAgICAgICBzb2NrZXQuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICBzb2NrZXQucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIF8pID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZUZ1bmMgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBzb2NrZXQuZW5kKCk7XHJcbiAgICAgICAgICAgICAgICBzb2NrZXQuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICAgICAgc29ja2V0LnJlbW92ZUFsbExpc3RlbmVycygpO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2Nsb3NlZCBsb2NhbGx5Jyk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHNvY2tldC5vbignY2xvc2UnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBzb2NrZXQucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnY2xvc2VkIHJlbW90ZWx5IChjbG9zZSknKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHNvY2tldC5vbignZW5kJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgc29ja2V0LnJlbW92ZUFsbExpc3RlbmVycygpO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2Nsb3NlZCByZW1vdGVseSAoZW5kKScpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmNvbm5lY3RlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuZW1pdCgnY29ubmVjdGlvbkNoYW5nZWQnLCBmYWxzZSk7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5SaW9Db25zb2xlID0gUmlvQ29uc29sZTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmlvY29uc29sZS5qcy5tYXAiLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuZnVuY3Rpb24gRXZlbnRFbWl0dGVyKCkge1xuICB0aGlzLl9ldmVudHMgPSB0aGlzLl9ldmVudHMgfHwge307XG4gIHRoaXMuX21heExpc3RlbmVycyA9IHRoaXMuX21heExpc3RlbmVycyB8fCB1bmRlZmluZWQ7XG59XG5tb2R1bGUuZXhwb3J0cyA9IEV2ZW50RW1pdHRlcjtcblxuLy8gQmFja3dhcmRzLWNvbXBhdCB3aXRoIG5vZGUgMC4xMC54XG5FdmVudEVtaXR0ZXIuRXZlbnRFbWl0dGVyID0gRXZlbnRFbWl0dGVyO1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLl9ldmVudHMgPSB1bmRlZmluZWQ7XG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLl9tYXhMaXN0ZW5lcnMgPSB1bmRlZmluZWQ7XG5cbi8vIEJ5IGRlZmF1bHQgRXZlbnRFbWl0dGVycyB3aWxsIHByaW50IGEgd2FybmluZyBpZiBtb3JlIHRoYW4gMTAgbGlzdGVuZXJzIGFyZVxuLy8gYWRkZWQgdG8gaXQuIFRoaXMgaXMgYSB1c2VmdWwgZGVmYXVsdCB3aGljaCBoZWxwcyBmaW5kaW5nIG1lbW9yeSBsZWFrcy5cbkV2ZW50RW1pdHRlci5kZWZhdWx0TWF4TGlzdGVuZXJzID0gMTA7XG5cbi8vIE9idmlvdXNseSBub3QgYWxsIEVtaXR0ZXJzIHNob3VsZCBiZSBsaW1pdGVkIHRvIDEwLiBUaGlzIGZ1bmN0aW9uIGFsbG93c1xuLy8gdGhhdCB0byBiZSBpbmNyZWFzZWQuIFNldCB0byB6ZXJvIGZvciB1bmxpbWl0ZWQuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnNldE1heExpc3RlbmVycyA9IGZ1bmN0aW9uKG4pIHtcbiAgaWYgKCFpc051bWJlcihuKSB8fCBuIDwgMCB8fCBpc05hTihuKSlcbiAgICB0aHJvdyBUeXBlRXJyb3IoJ24gbXVzdCBiZSBhIHBvc2l0aXZlIG51bWJlcicpO1xuICB0aGlzLl9tYXhMaXN0ZW5lcnMgPSBuO1xuICByZXR1cm4gdGhpcztcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgdmFyIGVyLCBoYW5kbGVyLCBsZW4sIGFyZ3MsIGksIGxpc3RlbmVycztcblxuICBpZiAoIXRoaXMuX2V2ZW50cylcbiAgICB0aGlzLl9ldmVudHMgPSB7fTtcblxuICAvLyBJZiB0aGVyZSBpcyBubyAnZXJyb3InIGV2ZW50IGxpc3RlbmVyIHRoZW4gdGhyb3cuXG4gIGlmICh0eXBlID09PSAnZXJyb3InKSB7XG4gICAgaWYgKCF0aGlzLl9ldmVudHMuZXJyb3IgfHxcbiAgICAgICAgKGlzT2JqZWN0KHRoaXMuX2V2ZW50cy5lcnJvcikgJiYgIXRoaXMuX2V2ZW50cy5lcnJvci5sZW5ndGgpKSB7XG4gICAgICBlciA9IGFyZ3VtZW50c1sxXTtcbiAgICAgIGlmIChlciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgIHRocm93IGVyOyAvLyBVbmhhbmRsZWQgJ2Vycm9yJyBldmVudFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQXQgbGVhc3QgZ2l2ZSBzb21lIGtpbmQgb2YgY29udGV4dCB0byB0aGUgdXNlclxuICAgICAgICB2YXIgZXJyID0gbmV3IEVycm9yKCdVbmNhdWdodCwgdW5zcGVjaWZpZWQgXCJlcnJvclwiIGV2ZW50LiAoJyArIGVyICsgJyknKTtcbiAgICAgICAgZXJyLmNvbnRleHQgPSBlcjtcbiAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGhhbmRsZXIgPSB0aGlzLl9ldmVudHNbdHlwZV07XG5cbiAgaWYgKGlzVW5kZWZpbmVkKGhhbmRsZXIpKVxuICAgIHJldHVybiBmYWxzZTtcblxuICBpZiAoaXNGdW5jdGlvbihoYW5kbGVyKSkge1xuICAgIHN3aXRjaCAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgLy8gZmFzdCBjYXNlc1xuICAgICAgY2FzZSAxOlxuICAgICAgICBoYW5kbGVyLmNhbGwodGhpcyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAyOlxuICAgICAgICBoYW5kbGVyLmNhbGwodGhpcywgYXJndW1lbnRzWzFdKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDM6XG4gICAgICAgIGhhbmRsZXIuY2FsbCh0aGlzLCBhcmd1bWVudHNbMV0sIGFyZ3VtZW50c1syXSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgLy8gc2xvd2VyXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcbiAgICAgICAgaGFuZGxlci5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoaXNPYmplY3QoaGFuZGxlcikpIHtcbiAgICBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcbiAgICBsaXN0ZW5lcnMgPSBoYW5kbGVyLnNsaWNlKCk7XG4gICAgbGVuID0gbGlzdGVuZXJzLmxlbmd0aDtcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspXG4gICAgICBsaXN0ZW5lcnNbaV0uYXBwbHkodGhpcywgYXJncyk7XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkTGlzdGVuZXIgPSBmdW5jdGlvbih0eXBlLCBsaXN0ZW5lcikge1xuICB2YXIgbTtcblxuICBpZiAoIWlzRnVuY3Rpb24obGlzdGVuZXIpKVxuICAgIHRocm93IFR5cGVFcnJvcignbGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG5cbiAgaWYgKCF0aGlzLl9ldmVudHMpXG4gICAgdGhpcy5fZXZlbnRzID0ge307XG5cbiAgLy8gVG8gYXZvaWQgcmVjdXJzaW9uIGluIHRoZSBjYXNlIHRoYXQgdHlwZSA9PT0gXCJuZXdMaXN0ZW5lclwiISBCZWZvcmVcbiAgLy8gYWRkaW5nIGl0IHRvIHRoZSBsaXN0ZW5lcnMsIGZpcnN0IGVtaXQgXCJuZXdMaXN0ZW5lclwiLlxuICBpZiAodGhpcy5fZXZlbnRzLm5ld0xpc3RlbmVyKVxuICAgIHRoaXMuZW1pdCgnbmV3TGlzdGVuZXInLCB0eXBlLFxuICAgICAgICAgICAgICBpc0Z1bmN0aW9uKGxpc3RlbmVyLmxpc3RlbmVyKSA/XG4gICAgICAgICAgICAgIGxpc3RlbmVyLmxpc3RlbmVyIDogbGlzdGVuZXIpO1xuXG4gIGlmICghdGhpcy5fZXZlbnRzW3R5cGVdKVxuICAgIC8vIE9wdGltaXplIHRoZSBjYXNlIG9mIG9uZSBsaXN0ZW5lci4gRG9uJ3QgbmVlZCB0aGUgZXh0cmEgYXJyYXkgb2JqZWN0LlxuICAgIHRoaXMuX2V2ZW50c1t0eXBlXSA9IGxpc3RlbmVyO1xuICBlbHNlIGlmIChpc09iamVjdCh0aGlzLl9ldmVudHNbdHlwZV0pKVxuICAgIC8vIElmIHdlJ3ZlIGFscmVhZHkgZ290IGFuIGFycmF5LCBqdXN0IGFwcGVuZC5cbiAgICB0aGlzLl9ldmVudHNbdHlwZV0ucHVzaChsaXN0ZW5lcik7XG4gIGVsc2VcbiAgICAvLyBBZGRpbmcgdGhlIHNlY29uZCBlbGVtZW50LCBuZWVkIHRvIGNoYW5nZSB0byBhcnJheS5cbiAgICB0aGlzLl9ldmVudHNbdHlwZV0gPSBbdGhpcy5fZXZlbnRzW3R5cGVdLCBsaXN0ZW5lcl07XG5cbiAgLy8gQ2hlY2sgZm9yIGxpc3RlbmVyIGxlYWtcbiAgaWYgKGlzT2JqZWN0KHRoaXMuX2V2ZW50c1t0eXBlXSkgJiYgIXRoaXMuX2V2ZW50c1t0eXBlXS53YXJuZWQpIHtcbiAgICBpZiAoIWlzVW5kZWZpbmVkKHRoaXMuX21heExpc3RlbmVycykpIHtcbiAgICAgIG0gPSB0aGlzLl9tYXhMaXN0ZW5lcnM7XG4gICAgfSBlbHNlIHtcbiAgICAgIG0gPSBFdmVudEVtaXR0ZXIuZGVmYXVsdE1heExpc3RlbmVycztcbiAgICB9XG5cbiAgICBpZiAobSAmJiBtID4gMCAmJiB0aGlzLl9ldmVudHNbdHlwZV0ubGVuZ3RoID4gbSkge1xuICAgICAgdGhpcy5fZXZlbnRzW3R5cGVdLndhcm5lZCA9IHRydWU7XG4gICAgICBjb25zb2xlLmVycm9yKCcobm9kZSkgd2FybmluZzogcG9zc2libGUgRXZlbnRFbWl0dGVyIG1lbW9yeSAnICtcbiAgICAgICAgICAgICAgICAgICAgJ2xlYWsgZGV0ZWN0ZWQuICVkIGxpc3RlbmVycyBhZGRlZC4gJyArXG4gICAgICAgICAgICAgICAgICAgICdVc2UgZW1pdHRlci5zZXRNYXhMaXN0ZW5lcnMoKSB0byBpbmNyZWFzZSBsaW1pdC4nLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9ldmVudHNbdHlwZV0ubGVuZ3RoKTtcbiAgICAgIGlmICh0eXBlb2YgY29uc29sZS50cmFjZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAvLyBub3Qgc3VwcG9ydGVkIGluIElFIDEwXG4gICAgICAgIGNvbnNvbGUudHJhY2UoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGhpcztcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub24gPSBFdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyO1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbih0eXBlLCBsaXN0ZW5lcikge1xuICBpZiAoIWlzRnVuY3Rpb24obGlzdGVuZXIpKVxuICAgIHRocm93IFR5cGVFcnJvcignbGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG5cbiAgdmFyIGZpcmVkID0gZmFsc2U7XG5cbiAgZnVuY3Rpb24gZygpIHtcbiAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGcpO1xuXG4gICAgaWYgKCFmaXJlZCkge1xuICAgICAgZmlyZWQgPSB0cnVlO1xuICAgICAgbGlzdGVuZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gIH1cblxuICBnLmxpc3RlbmVyID0gbGlzdGVuZXI7XG4gIHRoaXMub24odHlwZSwgZyk7XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vLyBlbWl0cyBhICdyZW1vdmVMaXN0ZW5lcicgZXZlbnQgaWZmIHRoZSBsaXN0ZW5lciB3YXMgcmVtb3ZlZFxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lciA9IGZ1bmN0aW9uKHR5cGUsIGxpc3RlbmVyKSB7XG4gIHZhciBsaXN0LCBwb3NpdGlvbiwgbGVuZ3RoLCBpO1xuXG4gIGlmICghaXNGdW5jdGlvbihsaXN0ZW5lcikpXG4gICAgdGhyb3cgVHlwZUVycm9yKCdsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcblxuICBpZiAoIXRoaXMuX2V2ZW50cyB8fCAhdGhpcy5fZXZlbnRzW3R5cGVdKVxuICAgIHJldHVybiB0aGlzO1xuXG4gIGxpc3QgPSB0aGlzLl9ldmVudHNbdHlwZV07XG4gIGxlbmd0aCA9IGxpc3QubGVuZ3RoO1xuICBwb3NpdGlvbiA9IC0xO1xuXG4gIGlmIChsaXN0ID09PSBsaXN0ZW5lciB8fFxuICAgICAgKGlzRnVuY3Rpb24obGlzdC5saXN0ZW5lcikgJiYgbGlzdC5saXN0ZW5lciA9PT0gbGlzdGVuZXIpKSB7XG4gICAgZGVsZXRlIHRoaXMuX2V2ZW50c1t0eXBlXTtcbiAgICBpZiAodGhpcy5fZXZlbnRzLnJlbW92ZUxpc3RlbmVyKVxuICAgICAgdGhpcy5lbWl0KCdyZW1vdmVMaXN0ZW5lcicsIHR5cGUsIGxpc3RlbmVyKTtcblxuICB9IGVsc2UgaWYgKGlzT2JqZWN0KGxpc3QpKSB7XG4gICAgZm9yIChpID0gbGVuZ3RoOyBpLS0gPiAwOykge1xuICAgICAgaWYgKGxpc3RbaV0gPT09IGxpc3RlbmVyIHx8XG4gICAgICAgICAgKGxpc3RbaV0ubGlzdGVuZXIgJiYgbGlzdFtpXS5saXN0ZW5lciA9PT0gbGlzdGVuZXIpKSB7XG4gICAgICAgIHBvc2l0aW9uID0gaTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHBvc2l0aW9uIDwgMClcbiAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgaWYgKGxpc3QubGVuZ3RoID09PSAxKSB7XG4gICAgICBsaXN0Lmxlbmd0aCA9IDA7XG4gICAgICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdO1xuICAgIH0gZWxzZSB7XG4gICAgICBsaXN0LnNwbGljZShwb3NpdGlvbiwgMSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2V2ZW50cy5yZW1vdmVMaXN0ZW5lcilcbiAgICAgIHRoaXMuZW1pdCgncmVtb3ZlTGlzdGVuZXInLCB0eXBlLCBsaXN0ZW5lcik7XG4gIH1cblxuICByZXR1cm4gdGhpcztcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzID0gZnVuY3Rpb24odHlwZSkge1xuICB2YXIga2V5LCBsaXN0ZW5lcnM7XG5cbiAgaWYgKCF0aGlzLl9ldmVudHMpXG4gICAgcmV0dXJuIHRoaXM7XG5cbiAgLy8gbm90IGxpc3RlbmluZyBmb3IgcmVtb3ZlTGlzdGVuZXIsIG5vIG5lZWQgdG8gZW1pdFxuICBpZiAoIXRoaXMuX2V2ZW50cy5yZW1vdmVMaXN0ZW5lcikge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKVxuICAgICAgdGhpcy5fZXZlbnRzID0ge307XG4gICAgZWxzZSBpZiAodGhpcy5fZXZlbnRzW3R5cGVdKVxuICAgICAgZGVsZXRlIHRoaXMuX2V2ZW50c1t0eXBlXTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8vIGVtaXQgcmVtb3ZlTGlzdGVuZXIgZm9yIGFsbCBsaXN0ZW5lcnMgb24gYWxsIGV2ZW50c1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgIGZvciAoa2V5IGluIHRoaXMuX2V2ZW50cykge1xuICAgICAgaWYgKGtleSA9PT0gJ3JlbW92ZUxpc3RlbmVyJykgY29udGludWU7XG4gICAgICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycyhrZXkpO1xuICAgIH1cbiAgICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycygncmVtb3ZlTGlzdGVuZXInKTtcbiAgICB0aGlzLl9ldmVudHMgPSB7fTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGxpc3RlbmVycyA9IHRoaXMuX2V2ZW50c1t0eXBlXTtcblxuICBpZiAoaXNGdW5jdGlvbihsaXN0ZW5lcnMpKSB7XG4gICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnMpO1xuICB9IGVsc2UgaWYgKGxpc3RlbmVycykge1xuICAgIC8vIExJRk8gb3JkZXJcbiAgICB3aGlsZSAobGlzdGVuZXJzLmxlbmd0aClcbiAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIodHlwZSwgbGlzdGVuZXJzW2xpc3RlbmVycy5sZW5ndGggLSAxXSk7XG4gIH1cbiAgZGVsZXRlIHRoaXMuX2V2ZW50c1t0eXBlXTtcblxuICByZXR1cm4gdGhpcztcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJzID0gZnVuY3Rpb24odHlwZSkge1xuICB2YXIgcmV0O1xuICBpZiAoIXRoaXMuX2V2ZW50cyB8fCAhdGhpcy5fZXZlbnRzW3R5cGVdKVxuICAgIHJldCA9IFtdO1xuICBlbHNlIGlmIChpc0Z1bmN0aW9uKHRoaXMuX2V2ZW50c1t0eXBlXSkpXG4gICAgcmV0ID0gW3RoaXMuX2V2ZW50c1t0eXBlXV07XG4gIGVsc2VcbiAgICByZXQgPSB0aGlzLl9ldmVudHNbdHlwZV0uc2xpY2UoKTtcbiAgcmV0dXJuIHJldDtcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJDb3VudCA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgaWYgKHRoaXMuX2V2ZW50cykge1xuICAgIHZhciBldmxpc3RlbmVyID0gdGhpcy5fZXZlbnRzW3R5cGVdO1xuXG4gICAgaWYgKGlzRnVuY3Rpb24oZXZsaXN0ZW5lcikpXG4gICAgICByZXR1cm4gMTtcbiAgICBlbHNlIGlmIChldmxpc3RlbmVyKVxuICAgICAgcmV0dXJuIGV2bGlzdGVuZXIubGVuZ3RoO1xuICB9XG4gIHJldHVybiAwO1xufTtcblxuRXZlbnRFbWl0dGVyLmxpc3RlbmVyQ291bnQgPSBmdW5jdGlvbihlbWl0dGVyLCB0eXBlKSB7XG4gIHJldHVybiBlbWl0dGVyLmxpc3RlbmVyQ291bnQodHlwZSk7XG59O1xuXG5mdW5jdGlvbiBpc0Z1bmN0aW9uKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Z1bmN0aW9uJztcbn1cblxuZnVuY3Rpb24gaXNOdW1iZXIoYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnbnVtYmVyJztcbn1cblxuZnVuY3Rpb24gaXNPYmplY3QoYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnb2JqZWN0JyAmJiBhcmcgIT09IG51bGw7XG59XG5cbmZ1bmN0aW9uIGlzVW5kZWZpbmVkKGFyZykge1xuICByZXR1cm4gYXJnID09PSB2b2lkIDA7XG59XG4iLCIndXNlIHN0cmljdCc7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuY2xhc3MgUHJvbWlzZUNvbmRpdGlvbiB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLmhhc0JlZW5TZXQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmNvbmRTZXQgPSB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbiAgICB3YWl0KCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgXykgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmNvbmRTZXQgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmhhc0JlZW5TZXQgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgc2V0KCkge1xyXG4gICAgICAgIHRoaXMuaGFzQmVlblNldCA9IHRydWU7XHJcbiAgICAgICAgaWYgKHRoaXMuY29uZFNldCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29uZFNldCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJlc2V0KCkge1xyXG4gICAgICAgIHRoaXMuY29uZFNldCA9IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLmhhc0JlZW5TZXQgPSBmYWxzZTtcclxuICAgIH1cclxufVxyXG5leHBvcnRzLlByb21pc2VDb25kaXRpb24gPSBQcm9taXNlQ29uZGl0aW9uO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wcm9taXNlY29uZC5qcy5tYXAiLCIndXNlIHN0cmljdCc7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1heC1saW5lLWxlbmd0aFxyXG5jb25zdCBpbnRlcmZhY2VzXzEgPSByZXF1aXJlKFwiLi9pbnRlcmZhY2VzXCIpO1xyXG5jbGFzcyBSaW9Mb2dXaW5kb3cge1xyXG4gICAgY29uc3RydWN0b3Iod2luZG93UHJvdiwgcmlvQ29uUHJvaXZkZXIpIHtcclxuICAgICAgICB0aGlzLndlYnZpZXcgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5yaW9Db25zb2xlID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMucnVubmluZyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuZGlzcG9zYWJsZXMgPSBbXTtcclxuICAgICAgICB0aGlzLnBhdXNlZEFycmF5ID0gW107XHJcbiAgICAgICAgdGhpcy5wYXVzZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmhpZGRlbkFycmF5ID0gW107XHJcbiAgICAgICAgdGhpcy53aW5kb3dQcm92aWRlciA9IHdpbmRvd1Byb3Y7XHJcbiAgICAgICAgdGhpcy5yaW9Db25zb2xlUHJvdmlkZXIgPSByaW9Db25Qcm9pdmRlcjtcclxuICAgIH1cclxuICAgIHN0YXJ0KHRlYW1OdW1iZXIpIHtcclxuICAgICAgICBpZiAodGhpcy5ydW5uaW5nKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5ydW5uaW5nID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmNyZWF0ZVdlYlZpZXcoKTtcclxuICAgICAgICB0aGlzLmNyZWF0ZVJpb0NvbnNvbGUoKTtcclxuICAgICAgICBpZiAodGhpcy53ZWJ2aWV3ID09PSB1bmRlZmluZWQgfHwgdGhpcy5yaW9Db25zb2xlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLndlYnZpZXcub24oJ2RpZERpc3Bvc2UnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnJpb0NvbnNvbGUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yaW9Db25zb2xlLnN0b3AoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmlvQ29uc29sZS5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnJpb0NvbnNvbGUgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIHRoaXMud2VidmlldyA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgdGhpcy5ydW5uaW5nID0gZmFsc2U7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy53ZWJ2aWV3Lm9uKCdkaWRSZWNlaXZlTWVzc2FnZScsIGFzeW5jIChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMub25NZXNzYWdlUmVjZWl2ZWQoZGF0YSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5yaW9Db25zb2xlLm9uKCdjb25uZWN0aW9uQ2hhbmdlZCcsIGFzeW5jIChjKSA9PiB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMub25Db25uZWN0aW9uQ2hhbmdlZChjKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnJpb0NvbnNvbGUub24oJ21lc3NhZ2UnLCBhc3luYyAobWVzc2FnZSkgPT4ge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLm9uTmV3TWVzc2FnZVRvU2VuZChtZXNzYWdlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnJpb0NvbnNvbGUuc2V0VGVhbU51bWJlcih0ZWFtTnVtYmVyKTtcclxuICAgICAgICB0aGlzLnJpb0NvbnNvbGUuc3RhcnRMaXN0ZW5pbmcoKTtcclxuICAgIH1cclxuICAgIHN0b3AoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMud2VidmlldyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMud2Vidmlldy5kaXNwb3NlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZGlzcG9zZSgpIHtcclxuICAgICAgICB0aGlzLnN0b3AoKTtcclxuICAgICAgICBmb3IgKGNvbnN0IGQgb2YgdGhpcy5kaXNwb3NhYmxlcykge1xyXG4gICAgICAgICAgICBkLmRpc3Bvc2UoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjcmVhdGVXZWJWaWV3KCkge1xyXG4gICAgICAgIHRoaXMud2VidmlldyA9IHRoaXMud2luZG93UHJvdmlkZXIuY3JlYXRlV2luZG93VmlldygpO1xyXG4gICAgICAgIHRoaXMud2Vidmlldy5vbignd2luZG93QWN0aXZlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy53ZWJ2aWV3ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBXaW5kb3cgZ29lcyBhY3RpdmUuXHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMud2Vidmlldy5wb3N0TWVzc2FnZSh7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiB0aGlzLmhpZGRlbkFycmF5LFxyXG4gICAgICAgICAgICAgICAgdHlwZTogaW50ZXJmYWNlc18xLlNlbmRUeXBlcy5CYXRjaCxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnJpb0NvbnNvbGUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucmlvQ29uc29sZS5jb25uZWN0ZWQgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLndlYnZpZXcucG9zdE1lc3NhZ2Uoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBpbnRlcmZhY2VzXzEuU2VuZFR5cGVzLkNvbm5lY3Rpb25DaGFuZ2VkLFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy53ZWJ2aWV3LnBvc3RNZXNzYWdlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGludGVyZmFjZXNfMS5TZW5kVHlwZXMuQ29ubmVjdGlvbkNoYW5nZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGNyZWF0ZVJpb0NvbnNvbGUoKSB7XHJcbiAgICAgICAgdGhpcy5yaW9Db25zb2xlID0gdGhpcy5yaW9Db25zb2xlUHJvdmlkZXIuZ2V0UmlvQ29uc29sZSgpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgc2VuZFBhdXNlZCgpIHtcclxuICAgICAgICBpZiAodGhpcy53ZWJ2aWV3ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBzdWNjZXNzID0gYXdhaXQgdGhpcy53ZWJ2aWV3LnBvc3RNZXNzYWdlKHtcclxuICAgICAgICAgICAgbWVzc2FnZTogdGhpcy5wYXVzZWRBcnJheSxcclxuICAgICAgICAgICAgdHlwZTogaW50ZXJmYWNlc18xLlNlbmRUeXBlcy5CYXRjaCxcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAoIXN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgdGhpcy5oaWRkZW5BcnJheS5wdXNoKC4uLnRoaXMucGF1c2VkQXJyYXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnBhdXNlZEFycmF5ID0gW107XHJcbiAgICB9XHJcbiAgICBhc3luYyBvbkNvbm5lY3Rpb25DaGFuZ2VkKGNvbm5lY3RlZCkge1xyXG4gICAgICAgIGlmICh0aGlzLndlYnZpZXcgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjb25uZWN0ZWQpIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy53ZWJ2aWV3LnBvc3RNZXNzYWdlKHtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHRydWUsXHJcbiAgICAgICAgICAgICAgICB0eXBlOiBpbnRlcmZhY2VzXzEuU2VuZFR5cGVzLkNvbm5lY3Rpb25DaGFuZ2VkLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMud2Vidmlldy5wb3N0TWVzc2FnZSh7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHR5cGU6IGludGVyZmFjZXNfMS5TZW5kVHlwZXMuQ29ubmVjdGlvbkNoYW5nZWQsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGFzeW5jIG9uTmV3TWVzc2FnZVRvU2VuZChtZXNzYWdlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMud2VidmlldyA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMucGF1c2VkID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGF1c2VkQXJyYXkucHVzaChtZXNzYWdlKTtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy53ZWJ2aWV3LnBvc3RNZXNzYWdlKHtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMucGF1c2VkQXJyYXkubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgdHlwZTogaW50ZXJmYWNlc18xLlNlbmRUeXBlcy5QYXVzZVVwZGF0ZSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBzdWNjZXNzID0gYXdhaXQgdGhpcy53ZWJ2aWV3LnBvc3RNZXNzYWdlKHtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2UsXHJcbiAgICAgICAgICAgICAgICB0eXBlOiBpbnRlcmZhY2VzXzEuU2VuZFR5cGVzLk5ldyxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmICghc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5oaWRkZW5BcnJheS5wdXNoKG1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgYXN5bmMgb25NZXNzYWdlUmVjZWl2ZWQoZGF0YSkge1xyXG4gICAgICAgIGlmICh0aGlzLnJpb0NvbnNvbGUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChkYXRhLnR5cGUgPT09IGludGVyZmFjZXNfMS5SZWNlaXZlVHlwZXMuRGlzY2FyZCkge1xyXG4gICAgICAgICAgICB0aGlzLnJpb0NvbnNvbGUuZGlzY2FyZCA9IGRhdGEubWVzc2FnZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZGF0YS50eXBlID09PSBpbnRlcmZhY2VzXzEuUmVjZWl2ZVR5cGVzLlBhdXNlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9sZCA9IHRoaXMucGF1c2VkO1xyXG4gICAgICAgICAgICB0aGlzLnBhdXNlZCA9IGRhdGEubWVzc2FnZTtcclxuICAgICAgICAgICAgaWYgKG9sZCA9PT0gdHJ1ZSAmJiB0aGlzLnBhdXNlZCA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2VuZFBhdXNlZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gaW50ZXJmYWNlc18xLlJlY2VpdmVUeXBlcy5TYXZlKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLndlYnZpZXcgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IGRlc2VyaWFsaXplZExvZ3MgPSBbXTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBkIG9mIGRhdGEubWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkID0gSlNPTi5wYXJzZShkKTtcclxuICAgICAgICAgICAgICAgIGRlc2VyaWFsaXplZExvZ3MucHVzaChwYXJzZWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMud2Vidmlldy5oYW5kbGVTYXZlKGRlc2VyaWFsaXplZExvZ3MpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChkYXRhLnR5cGUgPT09IGludGVyZmFjZXNfMS5SZWNlaXZlVHlwZXMuUmVjb25uZWN0KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5ld1ZhbHVlID0gZGF0YS5tZXNzYWdlO1xyXG4gICAgICAgICAgICB0aGlzLnJpb0NvbnNvbGUuc2V0QXV0b1JlY29ubmVjdChuZXdWYWx1ZSk7XHJcbiAgICAgICAgICAgIGlmIChuZXdWYWx1ZSA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmlvQ29uc29sZS5kaXNjb25uZWN0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZGF0YS50eXBlID09PSBpbnRlcmZhY2VzXzEuUmVjZWl2ZVR5cGVzLkNoYW5nZU51bWJlcikge1xyXG4gICAgICAgICAgICBjb25zdCBudW1iZXIgPSBkYXRhLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzZXR0aW5nIHRlYW0gbnVtYmVyJyk7XHJcbiAgICAgICAgICAgIHRoaXMucmlvQ29uc29sZS5zZXRUZWFtTnVtYmVyKG51bWJlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuUmlvTG9nV2luZG93ID0gUmlvTG9nV2luZG93O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1yaW9sb2d3aW5kb3cuanMubWFwIiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxuaW1wb3J0IHsgSUlQQ1JlY2VpdmVNZXNzYWdlLCBJSVBDU2VuZE1lc3NhZ2UgfSBmcm9tICd3cGlsaWItcmlvbG9nJztcclxuaW1wb3J0IHsgY2hlY2tSZXNpemVJbXBsLCBoYW5kbGVNZXNzYWdlIH0gZnJvbSAnLi4vc2hhcmVkL3NoYXJlZHNjcmlwdCc7XHJcblxyXG5pbnRlcmZhY2UgSVZzQ29kZUFwaSB7XHJcbiAgcG9zdE1lc3NhZ2UobWVzc2FnZTogSUlQQ1JlY2VpdmVNZXNzYWdlLCB0bzogc3RyaW5nKTogdm9pZDtcclxufVxyXG5cclxuZGVjbGFyZSBmdW5jdGlvbiBhY3F1aXJlVnNDb2RlQXBpKCk6IElWc0NvZGVBcGk7XHJcblxyXG5jb25zdCB2c2NvZGUgPSBhY3F1aXJlVnNDb2RlQXBpKCk7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tSZXNpemUoKSB7XHJcbiAgY2hlY2tSZXNpemVJbXBsKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzY3JvbGxJbXBsKCkge1xyXG4gIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsSGVpZ2h0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2VuZE1lc3NhZ2UobWVzc2FnZTogSUlQQ1JlY2VpdmVNZXNzYWdlKSB7XHJcbiAgdnNjb2RlLnBvc3RNZXNzYWdlKG1lc3NhZ2UsICcqJyk7XHJcbn1cclxuXHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgKGV2ZW50KSA9PiB7XHJcbiAgY29uc3QgZGF0YTogSUlQQ1NlbmRNZXNzYWdlID0gZXZlbnQuZGF0YSBhcyBJSVBDU2VuZE1lc3NhZ2U7XHJcbiAgaGFuZGxlTWVzc2FnZShkYXRhKTtcclxufSk7XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=